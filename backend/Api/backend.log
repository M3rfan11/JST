Using launch settings from /Users/osz/Desktop/diploma/gradproject/Api/Properties/launchSettings.json...
Building...
/Users/osz/Desktop/diploma/gradproject/Api/SeedProducts.cs(99,13): warning CS0162: Unreachable code detected [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Services/OnlineOrderManager.cs(180,30): warning CS0168: The variable 'ex' is declared but never used [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/HealthController.cs(37,38): warning CS1998: This async method lacks 'await' operators and will run synchronously. Consider using the 'await' operator to await non-blocking API calls, or 'await Task.Run(...)' to do CPU-bound work on a background thread. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/OnlineOrderController.cs(100,36): warning CS8601: Possible null reference assignment. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/OnlineOrderController.cs(165,32): warning CS8601: Possible null reference assignment. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Services/OnlineOrderManager.cs(857,53): warning CS1998: This async method lacks 'await' operators and will run synchronously. Consider using the 'await' operator to await non-blocking API calls, or 'await Task.Run(...)' to do CPU-bound work on a background thread. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Services/OnlineOrderManager.cs(954,44): warning CS1998: This async method lacks 'await' operators and will run synchronously. Consider using the 'await' operator to await non-blocking API calls, or 'await Task.Run(...)' to do CPU-bound work on a background thread. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Services/OnlineOrderManager.cs(1025,34): warning CS8602: Dereference of a possibly null reference. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Services/OnlineOrderManager.cs(1102,28): warning CS8601: Possible null reference assignment. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/CustomerOrderController.cs(1101,69): warning CS8602: Dereference of a possibly null reference. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/CustomerOrderController.cs(1200,21): warning CS8602: Dereference of a possibly null reference. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/UserProfileController.cs(223,17): warning CS8604: Possible null reference argument for parameter 'entityId' in 'Task IAuditService.LogAsync(string entity, string entityId, string action, string? before = null, string? after = null, int? actorUserId = null)'. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/PromoCodeController.cs(436,29): warning CS8602: Dereference of a possibly null reference. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/SalesController.cs(134,34): warning CS8601: Possible null reference assignment. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/ReportsController.cs(233,38): warning CS8601: Possible null reference assignment. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/ReportsController.cs(275,36): warning CS8601: Possible null reference assignment. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/ProductController.cs(617,29): warning CS8602: Dereference of a possibly null reference. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/PromoCodeController.cs(721,29): warning CS8602: Dereference of a possibly null reference. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/ProductController.cs(1054,131): warning CS8619: Nullability of reference types in value of type 'List<string>' doesn't match target type 'List<string?>'. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/ProductController.cs(1067,30): warning CS8604: Possible null reference argument for parameter 'source' in 'IEnumerable<int> Enumerable.Select<ProductCategory, int>(IEnumerable<ProductCategory> source, Func<ProductCategory, int> selector)'. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/ProductController.cs(1124,29): warning CS8619: Nullability of reference types in value of type 'List<string?>' doesn't match target type 'List<string>'. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
/Users/osz/Desktop/diploma/gradproject/Api/Controllers/SalesController.cs(547,78): warning CS8602: Dereference of a possibly null reference. [/Users/osz/Desktop/diploma/gradproject/Api/Api.csproj]
info: Microsoft.EntityFrameworkCore.Migrations[20411]
      Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-12-15 13:31:20.693166+00:00');
      SELECT changes();
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
          "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
          "ProductVersion" TEXT NOT NULL
      );
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "MigrationId", "ProductVersion"
      FROM "__EFMigrationsHistory"
      ORDER BY "MigrationId";
info: Microsoft.EntityFrameworkCore.Migrations[20405]
      No migrations were applied. The database is already up to date.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      DELETE FROM "__EFMigrationsLock";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'SuperAdmin'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Admin'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Email" = 'admin@example.com'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'SuperAdmin'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminUser_Id_0='?' (DbType = Int32), @__superAdminForUser_Id_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."UserId", "u"."RoleId", "u"."AssignedAt"
      FROM "UserRoles" AS "u"
      WHERE "u"."UserId" = @__8__locals1_adminUser_Id_0 AND "u"."RoleId" = @__superAdminForUser_Id_1
      LIMIT 1
warn: Microsoft.EntityFrameworkCore.Query[10103]
      The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Action", "p"."CreatedAt", "p"."Description", "p"."Name", "p"."Resource"
      FROM "Permissions" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'SuperAdmin'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__superAdminRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."PermissionId"
      FROM "RolePermissions" AS "r"
      WHERE "r"."RoleId" = @__superAdminRole_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Action", "p"."CreatedAt", "p"."Description", "p"."Name", "p"."Resource"
      FROM "Permissions" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Admin'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."Name" = 'Online Store'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Email" = 'admin@company.com'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Admin'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Email" = 'admin@company.com'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Email" = 'alice.customer@company.com'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__admin_Id_0='?' (DbType = Int32), @__adminRole_Id_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."UserId", "u"."RoleId", "u"."AssignedAt"
      FROM "UserRoles" AS "u"
      WHERE "u"."UserId" = @__admin_Id_0 AND "u"."RoleId" = @__adminRole_Id_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__aliceCustomer_Id_0='?' (DbType = Int32), @__customerRole_Id_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."UserId", "u"."RoleId", "u"."AssignedAt"
      FROM "UserRoles" AS "u"
      WHERE "u"."UserId" = @__aliceCustomer_Id_0 AND "u"."RoleId" = @__customerRole_Id_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt"
      FROM "Categories" AS "c"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt"
      FROM "Categories" AS "c"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Categories" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
      FROM "Products" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt"
      FROM "Categories" AS "c"
      WHERE "c"."Name" = 'SEATING'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt"
      FROM "Categories" AS "c"
      WHERE "c"."Name" = 'SOFAS'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt"
      FROM "Categories" AS "c"
      WHERE "c"."Name" = 'ROOMS'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt"
      FROM "Categories" AS "c"
      WHERE "c"."Name" = 'TABLES'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt"
      FROM "Categories" AS "c"
      WHERE "c"."Name" = 'HOME DECORS'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt"
      FROM "Categories" AS "c"
      WHERE "c"."Name" = 'New Arrivals'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt"
      FROM "Categories" AS "c"
      WHERE "c"."Name" = 'Best Selling'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Products" SET "UpdatedAt" = @p0
      WHERE "Id" = @p1
      RETURNING 1;
Updated 28 products with furniture data.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
      FROM "Products" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__Select_0='?' (Size = 83)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId"
      FROM "ProductInventories" AS "p"
      WHERE "p"."ProductId" IN (
          SELECT "s"."value"
          FROM json_each(@__Select_0) AS "s"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      DELETE FROM "ProductInventories"
      WHERE "Id" = @p0
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ProductInventories" ("CreatedAt", "MaximumStockLevel", "MinimumStockLevel", "POSQuantity", "ProductId", "Quantity", "Unit", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://localhost:8080
info: Microsoft.Hosting.Lifetime[0]
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime[0]
      Hosting environment: Development
info: Microsoft.Hosting.Lifetime[0]
      Content root path: /Users/osz/Desktop/diploma/gradproject/Api
warn: Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware[3]
      Failed to determine the https port for redirect.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 15), @p7='?' (Size = 3), @p8='?' (Size = 10)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Api.Controllers.HealthController[0]
      Health check requested
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 15), @p7='?' (Size = 3), @p8='?' (Size = 10)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Api.Controllers.HealthController[0]
      Health check requested
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
warn: Microsoft.EntityFrameworkCore.Query[20504]
      Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (565ms) [Parameters=[@__categoryName_0='?' (Size = 7)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p3"."Id", "p3"."Attributes", "p3"."Color", "p3"."ColorHex", "p3"."CreatedAt", "p3"."ImageUrl", "p3"."IsActive", "p3"."MediaUrls", "p3"."PriceOverride", "p3"."ProductId", "p3"."SKU", "p3"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p1"."ProductId", "p1"."CategoryId", "c1"."Id", "c1"."CreatedAt", "c1"."Description", "c1"."IsActive", "c1"."Name", "c1"."UpdatedAt"
          FROM "ProductCategories" AS "p1"
          INNER JOIN "Categories" AS "c1" ON "p1"."CategoryId" = "c1"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p2"."Id", "p2"."CreatedAt", "p2"."MaximumStockLevel", "p2"."MinimumStockLevel", "p2"."POSQuantity", "p2"."ProductId", "p2"."Quantity", "p2"."Unit", "p2"."UpdatedAt", "p2"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p2"
          INNER JOIN "Warehouses" AS "w" ON "p2"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p3" ON "p"."Id" = "p3"."ProductId"
      WHERE "p"."IsActive" AND ("c"."Name" = @__categoryName_0 OR EXISTS (
          SELECT 1
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
          WHERE "p"."Id" = "p0"."ProductId" AND "c0"."Name" = @__categoryName_0))
      ORDER BY "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."IsActive"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 25), @__warehouse_Id_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId"
      FROM "VariantInventories" AS "v"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      ) AND "v"."WarehouseId" = @__warehouse_Id_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (415ms) [Parameters=[@__categoryName_0='?' (Size = 7)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p3"."Id", "p3"."Attributes", "p3"."Color", "p3"."ColorHex", "p3"."CreatedAt", "p3"."ImageUrl", "p3"."IsActive", "p3"."MediaUrls", "p3"."PriceOverride", "p3"."ProductId", "p3"."SKU", "p3"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p1"."ProductId", "p1"."CategoryId", "c1"."Id", "c1"."CreatedAt", "c1"."Description", "c1"."IsActive", "c1"."Name", "c1"."UpdatedAt"
          FROM "ProductCategories" AS "p1"
          INNER JOIN "Categories" AS "c1" ON "p1"."CategoryId" = "c1"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p2"."Id", "p2"."CreatedAt", "p2"."MaximumStockLevel", "p2"."MinimumStockLevel", "p2"."POSQuantity", "p2"."ProductId", "p2"."Quantity", "p2"."Unit", "p2"."UpdatedAt", "p2"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p2"
          INNER JOIN "Warehouses" AS "w" ON "p2"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p3" ON "p"."Id" = "p3"."ProductId"
      WHERE "p"."IsActive" AND ("c"."Name" = @__categoryName_0 OR EXISTS (
          SELECT 1
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
          WHERE "p"."Id" = "p0"."ProductId" AND "c0"."Name" = @__categoryName_0))
      ORDER BY "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."IsActive"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 25), @__warehouse_Id_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId"
      FROM "VariantInventories" AS "v"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      ) AND "v"."WarehouseId" = @__warehouse_Id_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
warn: Microsoft.EntityFrameworkCore.Query[20504]
      Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."AlwaysAvailable", "s"."Barcode", "s"."Brand", "s"."CategoryId", "s"."CompareAtPrice", "s"."Cost", "s"."CountryOfOrigin", "s"."CreatedAt", "s"."Description", "s"."Dimensions", "s"."ImageUrl", "s"."InventoryTracked", "s"."IsActive", "s"."IsPhysicalProduct", "s"."MediaUrls", "s"."Name", "s"."PackageHeight", "s"."PackageLength", "s"."PackageWidth", "s"."Price", "s"."ProductType", "s"."PublishingChannels", "s"."SKU", "s"."SellWhenOutOfStock", "s"."Status", "s"."Tags", "s"."Taxable", "s"."Unit", "s"."UpdatedAt", "s"."VariantAttributes", "s"."Vendor", "s"."Weight", "s"."Id0", "s"."CreatedAt0", "s"."Description0", "s"."IsActive0", "s"."Name0", "s"."UpdatedAt0", "s0"."ProductId", "s0"."CategoryId", "s0"."Id", "s0"."CreatedAt", "s0"."Description", "s0"."IsActive", "s0"."Name", "s0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."MaximumStockLevel", "s1"."MinimumStockLevel", "s1"."POSQuantity", "s1"."ProductId", "s1"."Quantity", "s1"."Unit", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."Address", "s1"."City", "s1"."CreatedAt0", "s1"."IsActive", "s1"."ManagerName", "s1"."ManagerUserId", "s1"."Name", "s1"."PhoneNumber", "s1"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM (
          SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id" AS "Id0", "c"."CreatedAt" AS "CreatedAt0", "c"."Description" AS "Description0", "c"."IsActive" AS "IsActive0", "c"."Name" AS "Name0", "c"."UpdatedAt" AS "UpdatedAt0"
          FROM "Products" AS "p"
          INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
          WHERE "p"."Id" = @__id_0
          LIMIT 1
      ) AS "s"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s0" ON "s"."Id" = "s0"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "s"."Id" = "p2"."ProductId"
      ORDER BY "s"."Id", "s"."Id0", "s0"."ProductId", "s0"."CategoryId", "s0"."Id", "s1"."Id", "s1"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."IsActive"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__productVariantIds_0='?' (Size = 2)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId"
      FROM "VariantInventories" AS "v"
      WHERE "v"."ProductVariantId" IN (
          SELECT "p"."value"
          FROM json_each(@__productVariantIds_0) AS "p"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."AlwaysAvailable", "s"."Barcode", "s"."Brand", "s"."CategoryId", "s"."CompareAtPrice", "s"."Cost", "s"."CountryOfOrigin", "s"."CreatedAt", "s"."Description", "s"."Dimensions", "s"."ImageUrl", "s"."InventoryTracked", "s"."IsActive", "s"."IsPhysicalProduct", "s"."MediaUrls", "s"."Name", "s"."PackageHeight", "s"."PackageLength", "s"."PackageWidth", "s"."Price", "s"."ProductType", "s"."PublishingChannels", "s"."SKU", "s"."SellWhenOutOfStock", "s"."Status", "s"."Tags", "s"."Taxable", "s"."Unit", "s"."UpdatedAt", "s"."VariantAttributes", "s"."Vendor", "s"."Weight", "s"."Id0", "s"."CreatedAt0", "s"."Description0", "s"."IsActive0", "s"."Name0", "s"."UpdatedAt0", "s0"."ProductId", "s0"."CategoryId", "s0"."Id", "s0"."CreatedAt", "s0"."Description", "s0"."IsActive", "s0"."Name", "s0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."MaximumStockLevel", "s1"."MinimumStockLevel", "s1"."POSQuantity", "s1"."ProductId", "s1"."Quantity", "s1"."Unit", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."Address", "s1"."City", "s1"."CreatedAt0", "s1"."IsActive", "s1"."ManagerName", "s1"."ManagerUserId", "s1"."Name", "s1"."PhoneNumber", "s1"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM (
          SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id" AS "Id0", "c"."CreatedAt" AS "CreatedAt0", "c"."Description" AS "Description0", "c"."IsActive" AS "IsActive0", "c"."Name" AS "Name0", "c"."UpdatedAt" AS "UpdatedAt0"
          FROM "Products" AS "p"
          INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
          WHERE "p"."Id" = @__id_0
          LIMIT 1
      ) AS "s"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s0" ON "s"."Id" = "s0"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "s"."Id" = "p2"."ProductId"
      ORDER BY "s"."Id", "s"."Id0", "s0"."ProductId", "s0"."CategoryId", "s0"."Id", "s1"."Id", "s1"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."IsActive"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__productVariantIds_0='?' (Size = 2)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId"
      FROM "VariantInventories" AS "v"
      WHERE "v"."ProductVariantId" IN (
          SELECT "p"."value"
          FROM json_each(@__productVariantIds_0) AS "p"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 35), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."Name" = 'Online Store' OR "w"."IsActive"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
      FROM "Products" AS "p"
      WHERE "p"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (7ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32), @__8__locals1_onlineWarehouse_Id_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
      WHERE "p"."ProductId" = @__item_ProductId_0 AND "p"."WarehouseId" = @__8__locals1_onlineWarehouse_Id_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__prefix_0_startswith='?' (Size = 14)], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."OrderNumber" LIKE @__prefix_0_startswith ESCAPE '\'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "u2"."Id", "u2"."Address", "u2"."AssignedStoreId", "u2"."CreatedAt", "u2"."Email", "u2"."FullName", "u2"."IsActive", "u2"."PasswordHash", "u2"."Phone", "u2"."UpdatedAt", "s"."UserId", "s"."RoleId", "s"."AssignedAt", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."Name"
      FROM (
          SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE EXISTS (
              SELECT 1
              FROM "UserRoles" AS "u0"
              INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
              WHERE "u"."Id" = "u0"."UserId" AND "r"."Name" = 'Admin')
          LIMIT 1
      ) AS "u2"
      LEFT JOIN (
          SELECT "u1"."UserId", "u1"."RoleId", "u1"."AssignedAt", "r0"."Id", "r0"."CreatedAt", "r0"."Description", "r0"."Name"
          FROM "UserRoles" AS "u1"
          INNER JOIN "Roles" AS "r0" ON "u1"."RoleId" = "r0"."Id"
      ) AS "s" ON "u2"."Id" = "s"."UserId"
      ORDER BY "u2"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 91), @p4='?' (Size = 17), @p5='?' (DbType = Int32), @p6='?' (Size = 16), @p7='?' (Size = 11), @p8='?' (DbType = DateTime), @p9='?' (DbType = Decimal), @p10='?' (Size = 58), @p11='?' (DbType = DateTime), @p12='?' (Size = 17), @p13='?' (Size = 7), @p14='?' (Size = 7), @p15='?' (DbType = Decimal), @p16='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "SalesOrders" ("ConfirmedByUserId", "CreatedAt", "CreatedByUserId", "CustomerAddress", "CustomerEmail", "CustomerId", "CustomerName", "CustomerPhone", "DeliveryDate", "DownPayment", "Notes", "OrderDate", "OrderNumber", "PaymentStatus", "Status", "TotalAmount", "UpdatedAt")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (Size = 13), @p2='?' (DbType = Int32), @p3='?' (Size = 7), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "OrderTrackings" ("Location", "Notes", "OrderId", "Status", "Timestamp", "UpdatedByUserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 5), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "SalesItems" ("CreatedAt", "Notes", "ProductId", "Quantity", "SalesOrderId", "TotalPrice", "Unit", "UnitPrice", "UpdatedAt", "WarehouseId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 35), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      WHERE "s"."CustomerEmail" IS NOT NULL
      ORDER BY "s"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (6ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "s1"."Id", "s1"."ConfirmedByUserId", "s1"."CreatedAt", "s1"."CreatedByUserId", "s1"."CustomerAddress", "s1"."CustomerEmail", "s1"."CustomerId", "s1"."CustomerName", "s1"."CustomerPhone", "s1"."DeliveryDate", "s1"."DownPayment", "s1"."Notes", "s1"."OrderDate", "s1"."OrderNumber", "s1"."PaymentStatus", "s1"."Status", "s1"."TotalAmount", "s1"."UpdatedAt", "s2"."Id", "s2"."CreatedAt", "s2"."Notes", "s2"."ProductId", "s2"."Quantity", "s2"."SalesOrderId", "s2"."TotalPrice", "s2"."Unit", "s2"."UnitPrice", "s2"."UpdatedAt", "s2"."WarehouseId", "s2"."Id0", "s2"."AlwaysAvailable", "s2"."Barcode", "s2"."Brand", "s2"."CategoryId", "s2"."CompareAtPrice", "s2"."Cost", "s2"."CountryOfOrigin", "s2"."CreatedAt0", "s2"."Description", "s2"."Dimensions", "s2"."ImageUrl", "s2"."InventoryTracked", "s2"."IsActive", "s2"."IsPhysicalProduct", "s2"."MediaUrls", "s2"."Name", "s2"."PackageHeight", "s2"."PackageLength", "s2"."PackageWidth", "s2"."Price", "s2"."ProductType", "s2"."PublishingChannels", "s2"."SKU", "s2"."SellWhenOutOfStock", "s2"."Status", "s2"."Tags", "s2"."Taxable", "s2"."Unit0", "s2"."UpdatedAt0", "s2"."VariantAttributes", "s2"."Vendor", "s2"."Weight"
      FROM (
          SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
          FROM "SalesOrders" AS "s"
          WHERE "s"."Id" = @__orderId_0
          LIMIT 1
      ) AS "s1"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s2" ON "s1"."Id" = "s2"."SalesOrderId"
      ORDER BY "s1"."Id", "s2"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "o"."Id", "o"."Status", "o"."Notes", "o"."Location", "o"."Timestamp", CASE
          WHEN "u"."Id" IS NOT NULL THEN "u"."FullName"
          ELSE 'System'
      END AS "UpdatedByUserName"
      FROM "OrderTrackings" AS "o"
      LEFT JOIN "Users" AS "u" ON "o"."UpdatedByUserId" = "u"."Id"
      WHERE "o"."OrderId" = @__orderId_0
      ORDER BY "o"."Timestamp"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__request_Email_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "u1"."Id", "u1"."Address", "u1"."AssignedStoreId", "u1"."CreatedAt", "u1"."Email", "u1"."FullName", "u1"."IsActive", "u1"."PasswordHash", "u1"."Phone", "u1"."UpdatedAt", "s"."UserId", "s"."RoleId", "s"."AssignedAt", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."Name"
      FROM (
          SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE "u"."Email" = @__request_Email_0 AND "u"."IsActive"
          LIMIT 1
      ) AS "u1"
      LEFT JOIN (
          SELECT "u0"."UserId", "u0"."RoleId", "u0"."AssignedAt", "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u1"."Id" = "s"."UserId"
      ORDER BY "u1"."Id", "s"."UserId", "s"."RoleId"
info: Api.Services.JwtService[0]
      User admin@example.com logging in with roles: Customer, SuperAdmin
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("s"."TotalAmount"), '0.0')
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" IN ('Completed', 'Delivered')
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."TotalAmount"), '0.0')
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Received'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u1"."Id", "u1"."FullName", "u1"."Email", "u1"."IsActive", "u1"."CreatedAt", "u1"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id"
      FROM (
          SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE "u"."Id" = @__userId_0
          LIMIT 1
      ) AS "u1"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u1"."Id" = "s"."UserId"
      ORDER BY "u1"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 35), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions called. User authenticated: True, Identity name: System Administrator
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions: User ID 1 found
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
warn: Microsoft.EntityFrameworkCore.Query[20504]
      Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (152ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (164ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (152ms) [Parameters=[@__categoryName_0='?' (Size = 7)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p3"."Id", "p3"."Attributes", "p3"."Color", "p3"."ColorHex", "p3"."CreatedAt", "p3"."ImageUrl", "p3"."IsActive", "p3"."MediaUrls", "p3"."PriceOverride", "p3"."ProductId", "p3"."SKU", "p3"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p1"."ProductId", "p1"."CategoryId", "c1"."Id", "c1"."CreatedAt", "c1"."Description", "c1"."IsActive", "c1"."Name", "c1"."UpdatedAt"
          FROM "ProductCategories" AS "p1"
          INNER JOIN "Categories" AS "c1" ON "p1"."CategoryId" = "c1"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p2"."Id", "p2"."CreatedAt", "p2"."MaximumStockLevel", "p2"."MinimumStockLevel", "p2"."POSQuantity", "p2"."ProductId", "p2"."Quantity", "p2"."Unit", "p2"."UpdatedAt", "p2"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p2"
          INNER JOIN "Warehouses" AS "w" ON "p2"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p3" ON "p"."Id" = "p3"."ProductId"
      WHERE "p"."IsActive" AND ("c"."Name" = @__categoryName_0 OR EXISTS (
          SELECT 1
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
          WHERE "p"."Id" = "p0"."ProductId" AND "c0"."Name" = @__categoryName_0))
      ORDER BY "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."IsActive"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 25), @__warehouse_Id_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId"
      FROM "VariantInventories" AS "v"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      ) AND "v"."WarehouseId" = @__warehouse_Id_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (176ms) [Parameters=[@__categoryName_0='?' (Size = 7)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p3"."Id", "p3"."Attributes", "p3"."Color", "p3"."ColorHex", "p3"."CreatedAt", "p3"."ImageUrl", "p3"."IsActive", "p3"."MediaUrls", "p3"."PriceOverride", "p3"."ProductId", "p3"."SKU", "p3"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p1"."ProductId", "p1"."CategoryId", "c1"."Id", "c1"."CreatedAt", "c1"."Description", "c1"."IsActive", "c1"."Name", "c1"."UpdatedAt"
          FROM "ProductCategories" AS "p1"
          INNER JOIN "Categories" AS "c1" ON "p1"."CategoryId" = "c1"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p2"."Id", "p2"."CreatedAt", "p2"."MaximumStockLevel", "p2"."MinimumStockLevel", "p2"."POSQuantity", "p2"."ProductId", "p2"."Quantity", "p2"."Unit", "p2"."UpdatedAt", "p2"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p2"
          INNER JOIN "Warehouses" AS "w" ON "p2"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p3" ON "p"."Id" = "p3"."ProductId"
      WHERE "p"."IsActive" AND ("c"."Name" = @__categoryName_0 OR EXISTS (
          SELECT 1
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
          WHERE "p"."Id" = "p0"."ProductId" AND "c0"."Name" = @__categoryName_0))
      ORDER BY "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."IsActive"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 25), @__warehouse_Id_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId"
      FROM "VariantInventories" AS "v"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      ) AND "v"."WarehouseId" = @__warehouse_Id_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."AlwaysAvailable", "s"."Barcode", "s"."Brand", "s"."CategoryId", "s"."CompareAtPrice", "s"."Cost", "s"."CountryOfOrigin", "s"."CreatedAt", "s"."Description", "s"."Dimensions", "s"."ImageUrl", "s"."InventoryTracked", "s"."IsActive", "s"."IsPhysicalProduct", "s"."MediaUrls", "s"."Name", "s"."PackageHeight", "s"."PackageLength", "s"."PackageWidth", "s"."Price", "s"."ProductType", "s"."PublishingChannels", "s"."SKU", "s"."SellWhenOutOfStock", "s"."Status", "s"."Tags", "s"."Taxable", "s"."Unit", "s"."UpdatedAt", "s"."VariantAttributes", "s"."Vendor", "s"."Weight", "s"."Id0", "s"."CreatedAt0", "s"."Description0", "s"."IsActive0", "s"."Name0", "s"."UpdatedAt0", "s0"."ProductId", "s0"."CategoryId", "s0"."Id", "s0"."CreatedAt", "s0"."Description", "s0"."IsActive", "s0"."Name", "s0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."MaximumStockLevel", "s1"."MinimumStockLevel", "s1"."POSQuantity", "s1"."ProductId", "s1"."Quantity", "s1"."Unit", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."Address", "s1"."City", "s1"."CreatedAt0", "s1"."IsActive", "s1"."ManagerName", "s1"."ManagerUserId", "s1"."Name", "s1"."PhoneNumber", "s1"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM (
          SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id" AS "Id0", "c"."CreatedAt" AS "CreatedAt0", "c"."Description" AS "Description0", "c"."IsActive" AS "IsActive0", "c"."Name" AS "Name0", "c"."UpdatedAt" AS "UpdatedAt0"
          FROM "Products" AS "p"
          INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
          WHERE "p"."Id" = @__id_0
          LIMIT 1
      ) AS "s"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s0" ON "s"."Id" = "s0"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "s"."Id" = "p2"."ProductId"
      ORDER BY "s"."Id", "s"."Id0", "s0"."ProductId", "s0"."CategoryId", "s0"."Id", "s1"."Id", "s1"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."IsActive"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__productVariantIds_0='?' (Size = 2)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId"
      FROM "VariantInventories" AS "v"
      WHERE "v"."ProductVariantId" IN (
          SELECT "p"."value"
          FROM json_each(@__productVariantIds_0) AS "p"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."AlwaysAvailable", "s"."Barcode", "s"."Brand", "s"."CategoryId", "s"."CompareAtPrice", "s"."Cost", "s"."CountryOfOrigin", "s"."CreatedAt", "s"."Description", "s"."Dimensions", "s"."ImageUrl", "s"."InventoryTracked", "s"."IsActive", "s"."IsPhysicalProduct", "s"."MediaUrls", "s"."Name", "s"."PackageHeight", "s"."PackageLength", "s"."PackageWidth", "s"."Price", "s"."ProductType", "s"."PublishingChannels", "s"."SKU", "s"."SellWhenOutOfStock", "s"."Status", "s"."Tags", "s"."Taxable", "s"."Unit", "s"."UpdatedAt", "s"."VariantAttributes", "s"."Vendor", "s"."Weight", "s"."Id0", "s"."CreatedAt0", "s"."Description0", "s"."IsActive0", "s"."Name0", "s"."UpdatedAt0", "s0"."ProductId", "s0"."CategoryId", "s0"."Id", "s0"."CreatedAt", "s0"."Description", "s0"."IsActive", "s0"."Name", "s0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."MaximumStockLevel", "s1"."MinimumStockLevel", "s1"."POSQuantity", "s1"."ProductId", "s1"."Quantity", "s1"."Unit", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."Address", "s1"."City", "s1"."CreatedAt0", "s1"."IsActive", "s1"."ManagerName", "s1"."ManagerUserId", "s1"."Name", "s1"."PhoneNumber", "s1"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM (
          SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id" AS "Id0", "c"."CreatedAt" AS "CreatedAt0", "c"."Description" AS "Description0", "c"."IsActive" AS "IsActive0", "c"."Name" AS "Name0", "c"."UpdatedAt" AS "UpdatedAt0"
          FROM "Products" AS "p"
          INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
          WHERE "p"."Id" = @__id_0
          LIMIT 1
      ) AS "s"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s0" ON "s"."Id" = "s0"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "s"."Id" = "p2"."ProductId"
      ORDER BY "s"."Id", "s"."Id0", "s0"."ProductId", "s0"."CategoryId", "s0"."Id", "s1"."Id", "s1"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."IsActive"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (4ms) [Parameters=[@__productVariantIds_0='?' (Size = 2)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId"
      FROM "VariantInventories" AS "v"
      WHERE "v"."ProductVariantId" IN (
          SELECT "p"."value"
          FROM json_each(@__productVariantIds_0) AS "p"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (134ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (152ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (Size = 40), @p2='?' (DbType = Int32), @p3='?' (Size = 9), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "OrderTrackings" ("Location", "Notes", "OrderId", "Status", "Timestamp", "UpdatedByUserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p17='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 91), @p4='?' (Size = 17), @p5='?' (DbType = Int32), @p6='?' (Size = 16), @p7='?' (Size = 11), @p8='?' (DbType = DateTime), @p9='?' (DbType = Decimal), @p10='?' (Size = 58), @p11='?' (DbType = DateTime), @p12='?' (Size = 17), @p13='?' (Size = 13), @p14='?' (Size = 9), @p15='?' (DbType = Decimal), @p16='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "SalesOrders" SET "ConfirmedByUserId" = @p0, "CreatedAt" = @p1, "CreatedByUserId" = @p2, "CustomerAddress" = @p3, "CustomerEmail" = @p4, "CustomerId" = @p5, "CustomerName" = @p6, "CustomerPhone" = @p7, "DeliveryDate" = @p8, "DownPayment" = @p9, "Notes" = @p10, "OrderDate" = @p11, "OrderNumber" = @p12, "PaymentStatus" = @p13, "Status" = @p14, "TotalAmount" = @p15, "UpdatedAt" = @p16
      WHERE "Id" = @p17
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?' (Size = 37), @p5='?' (Size = 10), @p6='?' (Size = 2), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (Size = 40), @p2='?' (DbType = Int32), @p3='?' (Size = 9), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "OrderTrackings" ("Location", "Notes", "OrderId", "Status", "Timestamp", "UpdatedByUserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p17='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 91), @p4='?' (Size = 17), @p5='?' (DbType = Int32), @p6='?' (Size = 16), @p7='?' (Size = 11), @p8='?' (DbType = DateTime), @p9='?' (DbType = Decimal), @p10='?' (Size = 48), @p11='?' (DbType = DateTime), @p12='?' (Size = 16), @p13='?' (Size = 7), @p14='?' (Size = 9), @p15='?' (DbType = Decimal), @p16='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "SalesOrders" SET "ConfirmedByUserId" = @p0, "CreatedAt" = @p1, "CreatedByUserId" = @p2, "CustomerAddress" = @p3, "CustomerEmail" = @p4, "CustomerId" = @p5, "CustomerName" = @p6, "CustomerPhone" = @p7, "DeliveryDate" = @p8, "DownPayment" = @p9, "Notes" = @p10, "OrderDate" = @p11, "OrderNumber" = @p12, "PaymentStatus" = @p13, "Status" = @p14, "TotalAmount" = @p15, "UpdatedAt" = @p16
      WHERE "Id" = @p17
      RETURNING 1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?' (Size = 36), @p5='?' (Size = 10), @p6='?' (Size = 2), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (302ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Email", "u"."FullName", NULL AS "Phone", 1 AS "IsRegistered", "u"."Id" AS "UserId", "u"."CreatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> ''
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> ''
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", (
          SELECT "s5"."CustomerAddress"
          FROM (
              SELECT "s6"."CreatedAt", "s6"."CustomerAddress", lower("s6"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s6"
              WHERE "s6"."CustomerEmail" IS NOT NULL AND "s6"."CustomerEmail" <> ''
          ) AS "s5"
          WHERE "s0"."Key" = "s5"."Key" OR ("s0"."Key" IS NULL AND "s5"."Key" IS NULL)
          ORDER BY "s5"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s0"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s0"."OrderDate") AS "FirstOrderDate", MAX("s0"."OrderDate") AS "LastOrderDate", MIN("s0"."CreatedAt") AS "CreatedAt"
      FROM (
          SELECT "s"."CreatedAt", "s"."OrderDate", "s"."TotalAmount", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> ''
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", "s"."CustomerPhone" AS "Phone", (
          SELECT "s1"."CustomerAddress"
          FROM "SalesOrders" AS "s1"
          WHERE ("s1"."CustomerEmail" IS NULL OR "s1"."CustomerEmail" = '') AND "s1"."CustomerPhone" IS NOT NULL AND "s1"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s1"."CustomerPhone"
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s"."OrderDate") AS "FirstOrderDate", MAX("s"."OrderDate") AS "LastOrderDate", MIN("s"."CreatedAt") AS "CreatedAt"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> ''
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Email", "u"."FullName", NULL AS "Phone", 1 AS "IsRegistered", "u"."Id" AS "UserId", "u"."CreatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> ''
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> ''
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", (
          SELECT "s5"."CustomerAddress"
          FROM (
              SELECT "s6"."CreatedAt", "s6"."CustomerAddress", lower("s6"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s6"
              WHERE "s6"."CustomerEmail" IS NOT NULL AND "s6"."CustomerEmail" <> ''
          ) AS "s5"
          WHERE "s0"."Key" = "s5"."Key" OR ("s0"."Key" IS NULL AND "s5"."Key" IS NULL)
          ORDER BY "s5"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s0"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s0"."OrderDate") AS "FirstOrderDate", MAX("s0"."OrderDate") AS "LastOrderDate", MIN("s0"."CreatedAt") AS "CreatedAt"
      FROM (
          SELECT "s"."CreatedAt", "s"."OrderDate", "s"."TotalAmount", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> ''
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", "s"."CustomerPhone" AS "Phone", (
          SELECT "s1"."CustomerAddress"
          FROM "SalesOrders" AS "s1"
          WHERE ("s1"."CustomerEmail" IS NULL OR "s1"."CustomerEmail" = '') AND "s1"."CustomerPhone" IS NOT NULL AND "s1"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s1"."CustomerPhone"
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s"."OrderDate") AS "FirstOrderDate", MAX("s"."OrderDate") AS "LastOrderDate", MIN("s"."CreatedAt") AS "CreatedAt"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> ''
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 28), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
warn: Microsoft.EntityFrameworkCore.Query[20504]
      Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredEmails_0='?' (Size = 104)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> '' AND lower("s2"."CustomerEmail") NOT IN (
                  SELECT "r0"."value"
                  FROM json_each(@__registeredEmails_0) AS "r0"
              )
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> '' AND lower("s4"."CustomerEmail") NOT IN (
                  SELECT "r1"."value"
                  FROM json_each(@__registeredEmails_0) AS "r1"
              )
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s0"."OrderDate") AS "LastOrderDate"
      FROM (
          SELECT "s"."OrderDate", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> '' AND lower("s"."CustomerEmail") NOT IN (
              SELECT "r"."value"
              FROM json_each(@__registeredEmails_0) AS "r"
          )
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Code", "p"."CreatedAt", "p"."CreatedByUserId", "p"."Description", "p"."DiscountType", "p"."DiscountValue", "p"."EndDate", "p"."IsActive", "p"."MaximumDiscountAmount", "p"."MinimumOrderAmount", "p"."StartDate", "p"."UpdatedAt", "p"."UsageLimit", "p"."UsageLimitPerUser", "p"."UsedCount", "u"."Id", "p0"."Id", "p0"."AssignedAt", "p0"."IsNotified", "p0"."NotifiedAt", "p0"."PromoCodeId", "p0"."UserId", "p1"."Id", "p1"."CreatedAt", "p1"."ProductId", "p1"."PromoCodeId", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodes" AS "p"
      LEFT JOIN "Users" AS "u" ON "p"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "PromoCodeUsers" AS "p0" ON "p"."Id" = "p0"."PromoCodeId"
      LEFT JOIN "PromoCodeProducts" AS "p1" ON "p"."Id" = "p1"."PromoCodeId"
      ORDER BY "p"."CreatedAt" DESC, "p"."Id", "u"."Id", "p0"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredPhones_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s0"."CustomerPhone" NOT IN (
              SELECT "r0"."value"
              FROM json_each(@__registeredPhones_0) AS "r0"
          ) AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", "s"."CustomerPhone" AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s"."OrderDate") AS "LastOrderDate"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> '' AND "s"."CustomerPhone" NOT IN (
          SELECT "r"."value"
          FROM json_each(@__registeredPhones_0) AS "r"
      )
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (147ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
warn: Microsoft.EntityFrameworkCore.Query[20504]
      Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Id", "s0"."Code", "s0"."CreatedAt", "s0"."CreatedByUserId", "s0"."Description", "s0"."DiscountType", "s0"."DiscountValue", "s0"."EndDate", "s0"."IsActive", "s0"."MaximumDiscountAmount", "s0"."MinimumOrderAmount", "s0"."StartDate", "s0"."UpdatedAt", "s0"."UsageLimit", "s0"."UsageLimitPerUser", "s0"."UsedCount", "s0"."Id0", "s1"."Id", "s1"."AssignedAt", "s1"."IsNotified", "s1"."NotifiedAt", "s1"."PromoCodeId", "s1"."UserId", "s1"."Id0", "s1"."Address", "s1"."AssignedStoreId", "s1"."CreatedAt", "s1"."Email", "s1"."FullName", "s1"."IsActive", "s1"."PasswordHash", "s1"."Phone", "s1"."UpdatedAt", "s2"."Id", "s2"."CreatedAt", "s2"."ProductId", "s2"."PromoCodeId", "s2"."Id0", "s2"."AlwaysAvailable", "s2"."Barcode", "s2"."Brand", "s2"."CategoryId", "s2"."CompareAtPrice", "s2"."Cost", "s2"."CountryOfOrigin", "s2"."CreatedAt0", "s2"."Description", "s2"."Dimensions", "s2"."ImageUrl", "s2"."InventoryTracked", "s2"."IsActive", "s2"."IsPhysicalProduct", "s2"."MediaUrls", "s2"."Name", "s2"."PackageHeight", "s2"."PackageLength", "s2"."PackageWidth", "s2"."Price", "s2"."ProductType", "s2"."PublishingChannels", "s2"."SKU", "s2"."SellWhenOutOfStock", "s2"."Status", "s2"."Tags", "s2"."Taxable", "s2"."Unit", "s2"."UpdatedAt", "s2"."VariantAttributes", "s2"."Vendor", "s2"."Weight", "s0"."Address", "s0"."AssignedStoreId", "s0"."CreatedAt0", "s0"."Email", "s0"."FullName", "s0"."IsActive0", "s0"."PasswordHash", "s0"."Phone", "s0"."UpdatedAt0", "s3"."Id", "s3"."DiscountAmount", "s3"."PromoCodeId", "s3"."SalesOrderId", "s3"."UsedAt", "s3"."UserId", "s3"."Id0", "s3"."Address", "s3"."AssignedStoreId", "s3"."CreatedAt", "s3"."Email", "s3"."FullName", "s3"."IsActive", "s3"."PasswordHash", "s3"."Phone", "s3"."UpdatedAt", "s3"."Id1", "s3"."ConfirmedByUserId", "s3"."CreatedAt0", "s3"."CreatedByUserId", "s3"."CustomerAddress", "s3"."CustomerEmail", "s3"."CustomerId", "s3"."CustomerName", "s3"."CustomerPhone", "s3"."DeliveryDate", "s3"."DownPayment", "s3"."Notes", "s3"."OrderDate", "s3"."OrderNumber", "s3"."PaymentStatus", "s3"."Status", "s3"."TotalAmount", "s3"."UpdatedAt0"
      FROM (
          SELECT "p"."Id", "p"."Code", "p"."CreatedAt", "p"."CreatedByUserId", "p"."Description", "p"."DiscountType", "p"."DiscountValue", "p"."EndDate", "p"."IsActive", "p"."MaximumDiscountAmount", "p"."MinimumOrderAmount", "p"."StartDate", "p"."UpdatedAt", "p"."UsageLimit", "p"."UsageLimitPerUser", "p"."UsedCount", "u"."Id" AS "Id0", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt" AS "CreatedAt0", "u"."Email", "u"."FullName", "u"."IsActive" AS "IsActive0", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt" AS "UpdatedAt0"
          FROM "PromoCodes" AS "p"
          LEFT JOIN "Users" AS "u" ON "p"."CreatedByUserId" = "u"."Id"
          WHERE "p"."Id" = @__id_0
          LIMIT 1
      ) AS "s0"
      LEFT JOIN (
          SELECT "p0"."Id", "p0"."AssignedAt", "p0"."IsNotified", "p0"."NotifiedAt", "p0"."PromoCodeId", "p0"."UserId", "u0"."Id" AS "Id0", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt"
          FROM "PromoCodeUsers" AS "p0"
          INNER JOIN "Users" AS "u0" ON "p0"."UserId" = "u0"."Id"
      ) AS "s1" ON "s0"."Id" = "s1"."PromoCodeId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."ProductId", "p1"."PromoCodeId", "p2"."Id" AS "Id0", "p2"."AlwaysAvailable", "p2"."Barcode", "p2"."Brand", "p2"."CategoryId", "p2"."CompareAtPrice", "p2"."Cost", "p2"."CountryOfOrigin", "p2"."CreatedAt" AS "CreatedAt0", "p2"."Description", "p2"."Dimensions", "p2"."ImageUrl", "p2"."InventoryTracked", "p2"."IsActive", "p2"."IsPhysicalProduct", "p2"."MediaUrls", "p2"."Name", "p2"."PackageHeight", "p2"."PackageLength", "p2"."PackageWidth", "p2"."Price", "p2"."ProductType", "p2"."PublishingChannels", "p2"."SKU", "p2"."SellWhenOutOfStock", "p2"."Status", "p2"."Tags", "p2"."Taxable", "p2"."Unit", "p2"."UpdatedAt", "p2"."VariantAttributes", "p2"."Vendor", "p2"."Weight"
          FROM "PromoCodeProducts" AS "p1"
          INNER JOIN "Products" AS "p2" ON "p1"."ProductId" = "p2"."Id"
      ) AS "s2" ON "s0"."Id" = "s2"."PromoCodeId"
      LEFT JOIN (
          SELECT "p3"."Id", "p3"."DiscountAmount", "p3"."PromoCodeId", "p3"."SalesOrderId", "p3"."UsedAt", "p3"."UserId", "u1"."Id" AS "Id0", "u1"."Address", "u1"."AssignedStoreId", "u1"."CreatedAt", "u1"."Email", "u1"."FullName", "u1"."IsActive", "u1"."PasswordHash", "u1"."Phone", "u1"."UpdatedAt", "s"."Id" AS "Id1", "s"."ConfirmedByUserId", "s"."CreatedAt" AS "CreatedAt0", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt" AS "UpdatedAt0"
          FROM "PromoCodeUsages" AS "p3"
          LEFT JOIN "Users" AS "u1" ON "p3"."UserId" = "u1"."Id"
          INNER JOIN "SalesOrders" AS "s" ON "p3"."SalesOrderId" = "s"."Id"
      ) AS "s3" ON "s0"."Id" = "s3"."PromoCodeId"
      ORDER BY "s0"."Id", "s0"."Id0", "s1"."Id", "s1"."Id0", "s2"."Id", "s2"."Id0", "s3"."Id", "s3"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Id", "s0"."Code", "s0"."CreatedAt", "s0"."CreatedByUserId", "s0"."Description", "s0"."DiscountType", "s0"."DiscountValue", "s0"."EndDate", "s0"."IsActive", "s0"."MaximumDiscountAmount", "s0"."MinimumOrderAmount", "s0"."StartDate", "s0"."UpdatedAt", "s0"."UsageLimit", "s0"."UsageLimitPerUser", "s0"."UsedCount", "s0"."Id0", "s1"."Id", "s1"."AssignedAt", "s1"."IsNotified", "s1"."NotifiedAt", "s1"."PromoCodeId", "s1"."UserId", "s1"."Id0", "s1"."Address", "s1"."AssignedStoreId", "s1"."CreatedAt", "s1"."Email", "s1"."FullName", "s1"."IsActive", "s1"."PasswordHash", "s1"."Phone", "s1"."UpdatedAt", "s2"."Id", "s2"."CreatedAt", "s2"."ProductId", "s2"."PromoCodeId", "s2"."Id0", "s2"."AlwaysAvailable", "s2"."Barcode", "s2"."Brand", "s2"."CategoryId", "s2"."CompareAtPrice", "s2"."Cost", "s2"."CountryOfOrigin", "s2"."CreatedAt0", "s2"."Description", "s2"."Dimensions", "s2"."ImageUrl", "s2"."InventoryTracked", "s2"."IsActive", "s2"."IsPhysicalProduct", "s2"."MediaUrls", "s2"."Name", "s2"."PackageHeight", "s2"."PackageLength", "s2"."PackageWidth", "s2"."Price", "s2"."ProductType", "s2"."PublishingChannels", "s2"."SKU", "s2"."SellWhenOutOfStock", "s2"."Status", "s2"."Tags", "s2"."Taxable", "s2"."Unit", "s2"."UpdatedAt", "s2"."VariantAttributes", "s2"."Vendor", "s2"."Weight", "s0"."Address", "s0"."AssignedStoreId", "s0"."CreatedAt0", "s0"."Email", "s0"."FullName", "s0"."IsActive0", "s0"."PasswordHash", "s0"."Phone", "s0"."UpdatedAt0", "s3"."Id", "s3"."DiscountAmount", "s3"."PromoCodeId", "s3"."SalesOrderId", "s3"."UsedAt", "s3"."UserId", "s3"."Id0", "s3"."Address", "s3"."AssignedStoreId", "s3"."CreatedAt", "s3"."Email", "s3"."FullName", "s3"."IsActive", "s3"."PasswordHash", "s3"."Phone", "s3"."UpdatedAt", "s3"."Id1", "s3"."ConfirmedByUserId", "s3"."CreatedAt0", "s3"."CreatedByUserId", "s3"."CustomerAddress", "s3"."CustomerEmail", "s3"."CustomerId", "s3"."CustomerName", "s3"."CustomerPhone", "s3"."DeliveryDate", "s3"."DownPayment", "s3"."Notes", "s3"."OrderDate", "s3"."OrderNumber", "s3"."PaymentStatus", "s3"."Status", "s3"."TotalAmount", "s3"."UpdatedAt0"
      FROM (
          SELECT "p"."Id", "p"."Code", "p"."CreatedAt", "p"."CreatedByUserId", "p"."Description", "p"."DiscountType", "p"."DiscountValue", "p"."EndDate", "p"."IsActive", "p"."MaximumDiscountAmount", "p"."MinimumOrderAmount", "p"."StartDate", "p"."UpdatedAt", "p"."UsageLimit", "p"."UsageLimitPerUser", "p"."UsedCount", "u"."Id" AS "Id0", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt" AS "CreatedAt0", "u"."Email", "u"."FullName", "u"."IsActive" AS "IsActive0", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt" AS "UpdatedAt0"
          FROM "PromoCodes" AS "p"
          LEFT JOIN "Users" AS "u" ON "p"."CreatedByUserId" = "u"."Id"
          WHERE "p"."Id" = @__id_0
          LIMIT 1
      ) AS "s0"
      LEFT JOIN (
          SELECT "p0"."Id", "p0"."AssignedAt", "p0"."IsNotified", "p0"."NotifiedAt", "p0"."PromoCodeId", "p0"."UserId", "u0"."Id" AS "Id0", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt"
          FROM "PromoCodeUsers" AS "p0"
          INNER JOIN "Users" AS "u0" ON "p0"."UserId" = "u0"."Id"
      ) AS "s1" ON "s0"."Id" = "s1"."PromoCodeId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."ProductId", "p1"."PromoCodeId", "p2"."Id" AS "Id0", "p2"."AlwaysAvailable", "p2"."Barcode", "p2"."Brand", "p2"."CategoryId", "p2"."CompareAtPrice", "p2"."Cost", "p2"."CountryOfOrigin", "p2"."CreatedAt" AS "CreatedAt0", "p2"."Description", "p2"."Dimensions", "p2"."ImageUrl", "p2"."InventoryTracked", "p2"."IsActive", "p2"."IsPhysicalProduct", "p2"."MediaUrls", "p2"."Name", "p2"."PackageHeight", "p2"."PackageLength", "p2"."PackageWidth", "p2"."Price", "p2"."ProductType", "p2"."PublishingChannels", "p2"."SKU", "p2"."SellWhenOutOfStock", "p2"."Status", "p2"."Tags", "p2"."Taxable", "p2"."Unit", "p2"."UpdatedAt", "p2"."VariantAttributes", "p2"."Vendor", "p2"."Weight"
          FROM "PromoCodeProducts" AS "p1"
          INNER JOIN "Products" AS "p2" ON "p1"."ProductId" = "p2"."Id"
      ) AS "s2" ON "s0"."Id" = "s2"."PromoCodeId"
      LEFT JOIN (
          SELECT "p3"."Id", "p3"."DiscountAmount", "p3"."PromoCodeId", "p3"."SalesOrderId", "p3"."UsedAt", "p3"."UserId", "u1"."Id" AS "Id0", "u1"."Address", "u1"."AssignedStoreId", "u1"."CreatedAt", "u1"."Email", "u1"."FullName", "u1"."IsActive", "u1"."PasswordHash", "u1"."Phone", "u1"."UpdatedAt", "s"."Id" AS "Id1", "s"."ConfirmedByUserId", "s"."CreatedAt" AS "CreatedAt0", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt" AS "UpdatedAt0"
          FROM "PromoCodeUsages" AS "p3"
          LEFT JOIN "Users" AS "u1" ON "p3"."UserId" = "u1"."Id"
          INNER JOIN "SalesOrders" AS "s" ON "p3"."SalesOrderId" = "s"."Id"
      ) AS "s3" ON "s0"."Id" = "s3"."PromoCodeId"
      ORDER BY "s0"."Id", "s0"."Id0", "s1"."Id", "s1"."Id0", "s2"."Id", "s2"."Id0", "s3"."Id", "s3"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 32), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."Name", "r"."Description", "r"."CreatedAt"
      FROM "Roles" AS "r"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Name", "p"."Description", "p"."Resource", "p"."Action", "p"."CreatedAt"
      FROM "Permissions" AS "p"
      ORDER BY "p"."Resource", "p"."Action"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."Name", "r"."Description", "r"."CreatedAt"
      FROM "Roles" AS "r"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 32), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Name", "p"."Description", "p"."Resource", "p"."Action", "p"."CreatedAt"
      FROM "Permissions" AS "p"
      ORDER BY "p"."Resource", "p"."Action"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id", "u"."AssignedStoreId"
      FROM "Users" AS "u"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u"."Id" = "s"."UserId"
      WHERE "u"."IsActive"
      ORDER BY "u"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id", "u"."AssignedStoreId"
      FROM "Users" AS "u"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u"."Id" = "s"."UserId"
      WHERE "u"."IsActive"
      ORDER BY "u"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 35), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r1"."Id", "r1"."CreatedAt", "r1"."Description", "r1"."Name", "s"."RoleId", "s"."PermissionId", "s"."AssignedAt", "s"."Id", "s"."Action", "s"."CreatedAt", "s"."Description", "s"."Name", "s"."Resource"
      FROM (
          SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
          FROM "Roles" AS "r"
          WHERE "r"."Id" = @__id_0
          LIMIT 1
      ) AS "r1"
      LEFT JOIN (
          SELECT "r0"."RoleId", "r0"."PermissionId", "r0"."AssignedAt", "p"."Id", "p"."Action", "p"."CreatedAt", "p"."Description", "p"."Name", "p"."Resource"
          FROM "RolePermissions" AS "r0"
          INNER JOIN "Permissions" AS "p" ON "r0"."PermissionId" = "p"."Id"
      ) AS "s" ON "r1"."Id" = "s"."RoleId"
      ORDER BY "r1"."Id", "s"."RoleId", "s"."PermissionId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u1"."Id", "u1"."FullName", "u1"."Email", "u1"."IsActive", "u1"."CreatedAt", "u1"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id"
      FROM (
          SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE "u"."Id" = @__userId_0
          LIMIT 1
      ) AS "u1"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u1"."Id" = "s"."UserId"
      ORDER BY "u1"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 35), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions called. User authenticated: True, Identity name: System Administrator
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions: User ID 1 found
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (152ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u1"."Id", "u1"."FullName", "u1"."Email", "u1"."IsActive", "u1"."CreatedAt", "u1"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id"
      FROM (
          SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE "u"."Id" = @__userId_0
          LIMIT 1
      ) AS "u1"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u1"."Id" = "s"."UserId"
      ORDER BY "u1"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 35), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions called. User authenticated: True, Identity name: System Administrator
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions: User ID 1 found
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (154ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (259ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (118ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (145ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (152ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (302ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (100ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Email", "u"."FullName", NULL AS "Phone", 1 AS "IsRegistered", "u"."Id" AS "UserId", "u"."CreatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> ''
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> ''
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", (
          SELECT "s5"."CustomerAddress"
          FROM (
              SELECT "s6"."CreatedAt", "s6"."CustomerAddress", lower("s6"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s6"
              WHERE "s6"."CustomerEmail" IS NOT NULL AND "s6"."CustomerEmail" <> ''
          ) AS "s5"
          WHERE "s0"."Key" = "s5"."Key" OR ("s0"."Key" IS NULL AND "s5"."Key" IS NULL)
          ORDER BY "s5"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s0"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s0"."OrderDate") AS "FirstOrderDate", MAX("s0"."OrderDate") AS "LastOrderDate", MIN("s0"."CreatedAt") AS "CreatedAt"
      FROM (
          SELECT "s"."CreatedAt", "s"."OrderDate", "s"."TotalAmount", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> ''
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", "s"."CustomerPhone" AS "Phone", (
          SELECT "s1"."CustomerAddress"
          FROM "SalesOrders" AS "s1"
          WHERE ("s1"."CustomerEmail" IS NULL OR "s1"."CustomerEmail" = '') AND "s1"."CustomerPhone" IS NOT NULL AND "s1"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s1"."CustomerPhone"
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s"."OrderDate") AS "FirstOrderDate", MAX("s"."OrderDate") AS "LastOrderDate", MIN("s"."CreatedAt") AS "CreatedAt"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> ''
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Email", "u"."FullName", NULL AS "Phone", 1 AS "IsRegistered", "u"."Id" AS "UserId", "u"."CreatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> ''
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> ''
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", (
          SELECT "s5"."CustomerAddress"
          FROM (
              SELECT "s6"."CreatedAt", "s6"."CustomerAddress", lower("s6"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s6"
              WHERE "s6"."CustomerEmail" IS NOT NULL AND "s6"."CustomerEmail" <> ''
          ) AS "s5"
          WHERE "s0"."Key" = "s5"."Key" OR ("s0"."Key" IS NULL AND "s5"."Key" IS NULL)
          ORDER BY "s5"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s0"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s0"."OrderDate") AS "FirstOrderDate", MAX("s0"."OrderDate") AS "LastOrderDate", MIN("s0"."CreatedAt") AS "CreatedAt"
      FROM (
          SELECT "s"."CreatedAt", "s"."OrderDate", "s"."TotalAmount", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> ''
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", "s"."CustomerPhone" AS "Phone", (
          SELECT "s1"."CustomerAddress"
          FROM "SalesOrders" AS "s1"
          WHERE ("s1"."CustomerEmail" IS NULL OR "s1"."CustomerEmail" = '') AND "s1"."CustomerPhone" IS NOT NULL AND "s1"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s1"."CustomerPhone"
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s"."OrderDate") AS "FirstOrderDate", MAX("s"."OrderDate") AS "LastOrderDate", MIN("s"."CreatedAt") AS "CreatedAt"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> ''
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (121ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 28), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__registeredEmails_0='?' (Size = 104)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> '' AND lower("s2"."CustomerEmail") NOT IN (
                  SELECT "r0"."value"
                  FROM json_each(@__registeredEmails_0) AS "r0"
              )
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> '' AND lower("s4"."CustomerEmail") NOT IN (
                  SELECT "r1"."value"
                  FROM json_each(@__registeredEmails_0) AS "r1"
              )
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s0"."OrderDate") AS "LastOrderDate"
      FROM (
          SELECT "s"."OrderDate", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> '' AND lower("s"."CustomerEmail") NOT IN (
              SELECT "r"."value"
              FROM json_each(@__registeredEmails_0) AS "r"
          )
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredPhones_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s0"."CustomerPhone" NOT IN (
              SELECT "r0"."value"
              FROM json_each(@__registeredPhones_0) AS "r0"
          ) AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", "s"."CustomerPhone" AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s"."OrderDate") AS "LastOrderDate"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> '' AND "s"."CustomerPhone" NOT IN (
          SELECT "r"."value"
          FROM json_each(@__registeredPhones_0) AS "r"
      )
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Code", "p"."CreatedAt", "p"."CreatedByUserId", "p"."Description", "p"."DiscountType", "p"."DiscountValue", "p"."EndDate", "p"."IsActive", "p"."MaximumDiscountAmount", "p"."MinimumOrderAmount", "p"."StartDate", "p"."UpdatedAt", "p"."UsageLimit", "p"."UsageLimitPerUser", "p"."UsedCount", "u"."Id", "p0"."Id", "p0"."AssignedAt", "p0"."IsNotified", "p0"."NotifiedAt", "p0"."PromoCodeId", "p0"."UserId", "p1"."Id", "p1"."CreatedAt", "p1"."ProductId", "p1"."PromoCodeId", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodes" AS "p"
      LEFT JOIN "Users" AS "u" ON "p"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "PromoCodeUsers" AS "p0" ON "p"."Id" = "p0"."PromoCodeId"
      LEFT JOIN "PromoCodeProducts" AS "p1" ON "p"."Id" = "p1"."PromoCodeId"
      ORDER BY "p"."CreatedAt" DESC, "p"."Id", "u"."Id", "p0"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (302ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (143ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."Name", "r"."Description", "r"."CreatedAt"
      FROM "Roles" AS "r"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."Name", "r"."Description", "r"."CreatedAt"
      FROM "Roles" AS "r"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 32), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Name", "p"."Description", "p"."Resource", "p"."Action", "p"."CreatedAt"
      FROM "Permissions" AS "p"
      ORDER BY "p"."Resource", "p"."Action"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 32), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Name", "p"."Description", "p"."Resource", "p"."Action", "p"."CreatedAt"
      FROM "Permissions" AS "p"
      ORDER BY "p"."Resource", "p"."Action"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (302ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id", "u"."AssignedStoreId"
      FROM "Users" AS "u"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u"."Id" = "s"."UserId"
      WHERE "u"."IsActive"
      ORDER BY "u"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id", "u"."AssignedStoreId"
      FROM "Users" AS "u"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u"."Id" = "s"."UserId"
      WHERE "u"."IsActive"
      ORDER BY "u"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u1"."Id", "u1"."FullName", "u1"."Email", "u1"."IsActive", "u1"."CreatedAt", "u1"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id"
      FROM (
          SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE "u"."Id" = @__userId_0
          LIMIT 1
      ) AS "u1"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u1"."Id" = "s"."UserId"
      ORDER BY "u1"."Id", "s"."UserId", "s"."RoleId"
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u1"."Id", "u1"."FullName", "u1"."Email", "u1"."IsActive", "u1"."CreatedAt", "u1"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id"
      FROM (
          SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE "u"."Id" = @__userId_0
          LIMIT 1
      ) AS "u1"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u1"."Id" = "s"."UserId"
      ORDER BY "u1"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 35), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Program[0]
      JWT Token validated for user ID: 1
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions called. User authenticated: True, Identity name: System Administrator
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions: User ID 1 found
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 35), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Program[0]
      JWT Token validated for user ID: 1
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions called. User authenticated: True, Identity name: System Administrator
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions: User ID 1 found
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
fail: Program[0]
      JWT Authentication failed: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '15/12/2025 2:34:39PM', Current time (UTC): '15/12/2025 3:04:28PM'.
      Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '15/12/2025 2:34:39PM', Current time (UTC): '15/12/2025 3:04:28PM'.
         at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
         at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
         at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
warn: Program[0]
      JWT Challenge: invalid_token, The token expired at '12/15/2025 14:34:39'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (162ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
fail: Program[0]
      JWT Authentication failed: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '15/12/2025 2:34:39PM', Current time (UTC): '15/12/2025 3:04:28PM'.
      Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '15/12/2025 2:34:39PM', Current time (UTC): '15/12/2025 3:04:28PM'.
         at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
         at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
         at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
warn: Program[0]
      JWT Challenge: invalid_token, The token expired at '12/15/2025 14:34:39'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (313ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 28), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
fail: Program[0]
      JWT Authentication failed: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '15/12/2025 2:34:39PM', Current time (UTC): '15/12/2025 3:04:28PM'.
      Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '15/12/2025 2:34:39PM', Current time (UTC): '15/12/2025 3:04:28PM'.
         at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
         at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
         at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
warn: Program[0]
      JWT Challenge: invalid_token, The token expired at '12/15/2025 14:34:39'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_Email_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "u1"."Id", "u1"."Address", "u1"."AssignedStoreId", "u1"."CreatedAt", "u1"."Email", "u1"."FullName", "u1"."IsActive", "u1"."PasswordHash", "u1"."Phone", "u1"."UpdatedAt", "s"."UserId", "s"."RoleId", "s"."AssignedAt", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."Name"
      FROM (
          SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE "u"."Email" = @__request_Email_0 AND "u"."IsActive"
          LIMIT 1
      ) AS "u1"
      LEFT JOIN (
          SELECT "u0"."UserId", "u0"."RoleId", "u0"."AssignedAt", "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u1"."Id" = "s"."UserId"
      ORDER BY "u1"."Id", "s"."UserId", "s"."RoleId"
info: Api.Services.JwtService[0]
      User admin@example.com logging in with roles: Customer, SuperAdmin
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u1"."Id", "u1"."FullName", "u1"."Email", "u1"."IsActive", "u1"."CreatedAt", "u1"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id"
      FROM (
          SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE "u"."Id" = @__userId_0
          LIMIT 1
      ) AS "u1"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u1"."Id" = "s"."UserId"
      ORDER BY "u1"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 28), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 35), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions called. User authenticated: True, Identity name: System Administrator
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions: User ID 1 found
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__ToLower_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredEmails_0='?' (Size = 104)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> '' AND lower("s2"."CustomerEmail") NOT IN (
                  SELECT "r0"."value"
                  FROM json_each(@__registeredEmails_0) AS "r0"
              )
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> '' AND lower("s4"."CustomerEmail") NOT IN (
                  SELECT "r1"."value"
                  FROM json_each(@__registeredEmails_0) AS "r1"
              )
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s0"."OrderDate") AS "LastOrderDate"
      FROM (
          SELECT "s"."OrderDate", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> '' AND lower("s"."CustomerEmail") NOT IN (
              SELECT "r"."value"
              FROM json_each(@__registeredEmails_0) AS "r"
          )
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredPhones_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s0"."CustomerPhone" NOT IN (
              SELECT "r0"."value"
              FROM json_each(@__registeredPhones_0) AS "r0"
          ) AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", "s"."CustomerPhone" AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s"."OrderDate") AS "LastOrderDate"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> '' AND "s"."CustomerPhone" NOT IN (
          SELECT "r"."value"
          FROM json_each(@__registeredPhones_0) AS "r"
      )
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 28), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredEmails_0='?' (Size = 104)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> '' AND lower("s2"."CustomerEmail") NOT IN (
                  SELECT "r0"."value"
                  FROM json_each(@__registeredEmails_0) AS "r0"
              )
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> '' AND lower("s4"."CustomerEmail") NOT IN (
                  SELECT "r1"."value"
                  FROM json_each(@__registeredEmails_0) AS "r1"
              )
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s0"."OrderDate") AS "LastOrderDate"
      FROM (
          SELECT "s"."OrderDate", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> '' AND lower("s"."CustomerEmail") NOT IN (
              SELECT "r"."value"
              FROM json_each(@__registeredEmails_0) AS "r"
          )
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredPhones_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s0"."CustomerPhone" NOT IN (
              SELECT "r0"."value"
              FROM json_each(@__registeredPhones_0) AS "r0"
          ) AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", "s"."CustomerPhone" AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s"."OrderDate") AS "LastOrderDate"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> '' AND "s"."CustomerPhone" NOT IN (
          SELECT "r"."value"
          FROM json_each(@__registeredPhones_0) AS "r"
      )
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 28), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredEmails_0='?' (Size = 104)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> '' AND lower("s2"."CustomerEmail") NOT IN (
                  SELECT "r0"."value"
                  FROM json_each(@__registeredEmails_0) AS "r0"
              )
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> '' AND lower("s4"."CustomerEmail") NOT IN (
                  SELECT "r1"."value"
                  FROM json_each(@__registeredEmails_0) AS "r1"
              )
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s0"."OrderDate") AS "LastOrderDate"
      FROM (
          SELECT "s"."OrderDate", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> '' AND lower("s"."CustomerEmail") NOT IN (
              SELECT "r"."value"
              FROM json_each(@__registeredEmails_0) AS "r"
          )
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredPhones_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s0"."CustomerPhone" NOT IN (
              SELECT "r0"."value"
              FROM json_each(@__registeredPhones_0) AS "r0"
          ) AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", "s"."CustomerPhone" AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s"."OrderDate") AS "LastOrderDate"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> '' AND "s"."CustomerPhone" NOT IN (
          SELECT "r"."value"
          FROM json_each(@__registeredPhones_0) AS "r"
      )
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 28), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredEmails_0='?' (Size = 104)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> '' AND lower("s2"."CustomerEmail") NOT IN (
                  SELECT "r0"."value"
                  FROM json_each(@__registeredEmails_0) AS "r0"
              )
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> '' AND lower("s4"."CustomerEmail") NOT IN (
                  SELECT "r1"."value"
                  FROM json_each(@__registeredEmails_0) AS "r1"
              )
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s0"."OrderDate") AS "LastOrderDate"
      FROM (
          SELECT "s"."OrderDate", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> '' AND lower("s"."CustomerEmail") NOT IN (
              SELECT "r"."value"
              FROM json_each(@__registeredEmails_0) AS "r"
          )
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredPhones_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s0"."CustomerPhone" NOT IN (
              SELECT "r0"."value"
              FROM json_each(@__registeredPhones_0) AS "r0"
          ) AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", "s"."CustomerPhone" AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s"."OrderDate") AS "LastOrderDate"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> '' AND "s"."CustomerPhone" NOT IN (
          SELECT "r"."value"
          FROM json_each(@__registeredPhones_0) AS "r"
      )
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Code", "p"."CreatedAt", "p"."CreatedByUserId", "p"."Description", "p"."DiscountType", "p"."DiscountValue", "p"."EndDate", "p"."IsActive", "p"."MaximumDiscountAmount", "p"."MinimumOrderAmount", "p"."StartDate", "p"."UpdatedAt", "p"."UsageLimit", "p"."UsageLimitPerUser", "p"."UsedCount", "u"."Id", "p0"."Id", "p0"."AssignedAt", "p0"."IsNotified", "p0"."NotifiedAt", "p0"."PromoCodeId", "p0"."UserId", "p1"."Id", "p1"."CreatedAt", "p1"."ProductId", "p1"."PromoCodeId", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodes" AS "p"
      LEFT JOIN "Users" AS "u" ON "p"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "PromoCodeUsers" AS "p0" ON "p"."Id" = "p0"."PromoCodeId"
      LEFT JOIN "PromoCodeProducts" AS "p1" ON "p"."Id" = "p1"."PromoCodeId"
      ORDER BY "p"."CreatedAt" DESC, "p"."Id", "u"."Id", "p0"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Code", "p"."CreatedAt", "p"."CreatedByUserId", "p"."Description", "p"."DiscountType", "p"."DiscountValue", "p"."EndDate", "p"."IsActive", "p"."MaximumDiscountAmount", "p"."MinimumOrderAmount", "p"."StartDate", "p"."UpdatedAt", "p"."UsageLimit", "p"."UsageLimitPerUser", "p"."UsedCount", "u"."Id", "p0"."Id", "p0"."AssignedAt", "p0"."IsNotified", "p0"."NotifiedAt", "p0"."PromoCodeId", "p0"."UserId", "p1"."Id", "p1"."CreatedAt", "p1"."ProductId", "p1"."PromoCodeId", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodes" AS "p"
      LEFT JOIN "Users" AS "u" ON "p"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "PromoCodeUsers" AS "p0" ON "p"."Id" = "p0"."PromoCodeId"
      LEFT JOIN "PromoCodeProducts" AS "p1" ON "p"."Id" = "p1"."PromoCodeId"
      ORDER BY "p"."CreatedAt" DESC, "p"."Id", "u"."Id", "p0"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Code", "p"."CreatedAt", "p"."CreatedByUserId", "p"."Description", "p"."DiscountType", "p"."DiscountValue", "p"."EndDate", "p"."IsActive", "p"."MaximumDiscountAmount", "p"."MinimumOrderAmount", "p"."StartDate", "p"."UpdatedAt", "p"."UsageLimit", "p"."UsageLimitPerUser", "p"."UsedCount", "u"."Id", "p0"."Id", "p0"."AssignedAt", "p0"."IsNotified", "p0"."NotifiedAt", "p0"."PromoCodeId", "p0"."UserId", "p1"."Id", "p1"."CreatedAt", "p1"."ProductId", "p1"."PromoCodeId", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodes" AS "p"
      LEFT JOIN "Users" AS "u" ON "p"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "PromoCodeUsers" AS "p0" ON "p"."Id" = "p0"."PromoCodeId"
      LEFT JOIN "PromoCodeProducts" AS "p1" ON "p"."Id" = "p1"."PromoCodeId"
      ORDER BY "p"."CreatedAt" DESC, "p"."Id", "u"."Id", "p0"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Code", "p"."CreatedAt", "p"."CreatedByUserId", "p"."Description", "p"."DiscountType", "p"."DiscountValue", "p"."EndDate", "p"."IsActive", "p"."MaximumDiscountAmount", "p"."MinimumOrderAmount", "p"."StartDate", "p"."UpdatedAt", "p"."UsageLimit", "p"."UsageLimitPerUser", "p"."UsedCount", "u"."Id", "p0"."Id", "p0"."AssignedAt", "p0"."IsNotified", "p0"."NotifiedAt", "p0"."PromoCodeId", "p0"."UserId", "p1"."Id", "p1"."CreatedAt", "p1"."ProductId", "p1"."PromoCodeId", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodes" AS "p"
      LEFT JOIN "Users" AS "u" ON "p"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "PromoCodeUsers" AS "p0" ON "p"."Id" = "p0"."PromoCodeId"
      LEFT JOIN "PromoCodeProducts" AS "p1" ON "p"."Id" = "p1"."PromoCodeId"
      ORDER BY "p"."CreatedAt" DESC, "p"."Id", "u"."Id", "p0"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (249ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (105ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (85ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (95ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Id", "s0"."Code", "s0"."CreatedAt", "s0"."CreatedByUserId", "s0"."Description", "s0"."DiscountType", "s0"."DiscountValue", "s0"."EndDate", "s0"."IsActive", "s0"."MaximumDiscountAmount", "s0"."MinimumOrderAmount", "s0"."StartDate", "s0"."UpdatedAt", "s0"."UsageLimit", "s0"."UsageLimitPerUser", "s0"."UsedCount", "s0"."Id0", "s1"."Id", "s1"."AssignedAt", "s1"."IsNotified", "s1"."NotifiedAt", "s1"."PromoCodeId", "s1"."UserId", "s1"."Id0", "s1"."Address", "s1"."AssignedStoreId", "s1"."CreatedAt", "s1"."Email", "s1"."FullName", "s1"."IsActive", "s1"."PasswordHash", "s1"."Phone", "s1"."UpdatedAt", "s2"."Id", "s2"."CreatedAt", "s2"."ProductId", "s2"."PromoCodeId", "s2"."Id0", "s2"."AlwaysAvailable", "s2"."Barcode", "s2"."Brand", "s2"."CategoryId", "s2"."CompareAtPrice", "s2"."Cost", "s2"."CountryOfOrigin", "s2"."CreatedAt0", "s2"."Description", "s2"."Dimensions", "s2"."ImageUrl", "s2"."InventoryTracked", "s2"."IsActive", "s2"."IsPhysicalProduct", "s2"."MediaUrls", "s2"."Name", "s2"."PackageHeight", "s2"."PackageLength", "s2"."PackageWidth", "s2"."Price", "s2"."ProductType", "s2"."PublishingChannels", "s2"."SKU", "s2"."SellWhenOutOfStock", "s2"."Status", "s2"."Tags", "s2"."Taxable", "s2"."Unit", "s2"."UpdatedAt", "s2"."VariantAttributes", "s2"."Vendor", "s2"."Weight", "s0"."Address", "s0"."AssignedStoreId", "s0"."CreatedAt0", "s0"."Email", "s0"."FullName", "s0"."IsActive0", "s0"."PasswordHash", "s0"."Phone", "s0"."UpdatedAt0", "s3"."Id", "s3"."DiscountAmount", "s3"."PromoCodeId", "s3"."SalesOrderId", "s3"."UsedAt", "s3"."UserId", "s3"."Id0", "s3"."Address", "s3"."AssignedStoreId", "s3"."CreatedAt", "s3"."Email", "s3"."FullName", "s3"."IsActive", "s3"."PasswordHash", "s3"."Phone", "s3"."UpdatedAt", "s3"."Id1", "s3"."ConfirmedByUserId", "s3"."CreatedAt0", "s3"."CreatedByUserId", "s3"."CustomerAddress", "s3"."CustomerEmail", "s3"."CustomerId", "s3"."CustomerName", "s3"."CustomerPhone", "s3"."DeliveryDate", "s3"."DownPayment", "s3"."Notes", "s3"."OrderDate", "s3"."OrderNumber", "s3"."PaymentStatus", "s3"."Status", "s3"."TotalAmount", "s3"."UpdatedAt0"
      FROM (
          SELECT "p"."Id", "p"."Code", "p"."CreatedAt", "p"."CreatedByUserId", "p"."Description", "p"."DiscountType", "p"."DiscountValue", "p"."EndDate", "p"."IsActive", "p"."MaximumDiscountAmount", "p"."MinimumOrderAmount", "p"."StartDate", "p"."UpdatedAt", "p"."UsageLimit", "p"."UsageLimitPerUser", "p"."UsedCount", "u"."Id" AS "Id0", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt" AS "CreatedAt0", "u"."Email", "u"."FullName", "u"."IsActive" AS "IsActive0", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt" AS "UpdatedAt0"
          FROM "PromoCodes" AS "p"
          LEFT JOIN "Users" AS "u" ON "p"."CreatedByUserId" = "u"."Id"
          WHERE "p"."Id" = @__id_0
          LIMIT 1
      ) AS "s0"
      LEFT JOIN (
          SELECT "p0"."Id", "p0"."AssignedAt", "p0"."IsNotified", "p0"."NotifiedAt", "p0"."PromoCodeId", "p0"."UserId", "u0"."Id" AS "Id0", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt"
          FROM "PromoCodeUsers" AS "p0"
          INNER JOIN "Users" AS "u0" ON "p0"."UserId" = "u0"."Id"
      ) AS "s1" ON "s0"."Id" = "s1"."PromoCodeId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."ProductId", "p1"."PromoCodeId", "p2"."Id" AS "Id0", "p2"."AlwaysAvailable", "p2"."Barcode", "p2"."Brand", "p2"."CategoryId", "p2"."CompareAtPrice", "p2"."Cost", "p2"."CountryOfOrigin", "p2"."CreatedAt" AS "CreatedAt0", "p2"."Description", "p2"."Dimensions", "p2"."ImageUrl", "p2"."InventoryTracked", "p2"."IsActive", "p2"."IsPhysicalProduct", "p2"."MediaUrls", "p2"."Name", "p2"."PackageHeight", "p2"."PackageLength", "p2"."PackageWidth", "p2"."Price", "p2"."ProductType", "p2"."PublishingChannels", "p2"."SKU", "p2"."SellWhenOutOfStock", "p2"."Status", "p2"."Tags", "p2"."Taxable", "p2"."Unit", "p2"."UpdatedAt", "p2"."VariantAttributes", "p2"."Vendor", "p2"."Weight"
          FROM "PromoCodeProducts" AS "p1"
          INNER JOIN "Products" AS "p2" ON "p1"."ProductId" = "p2"."Id"
      ) AS "s2" ON "s0"."Id" = "s2"."PromoCodeId"
      LEFT JOIN (
          SELECT "p3"."Id", "p3"."DiscountAmount", "p3"."PromoCodeId", "p3"."SalesOrderId", "p3"."UsedAt", "p3"."UserId", "u1"."Id" AS "Id0", "u1"."Address", "u1"."AssignedStoreId", "u1"."CreatedAt", "u1"."Email", "u1"."FullName", "u1"."IsActive", "u1"."PasswordHash", "u1"."Phone", "u1"."UpdatedAt", "s"."Id" AS "Id1", "s"."ConfirmedByUserId", "s"."CreatedAt" AS "CreatedAt0", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt" AS "UpdatedAt0"
          FROM "PromoCodeUsages" AS "p3"
          LEFT JOIN "Users" AS "u1" ON "p3"."UserId" = "u1"."Id"
          INNER JOIN "SalesOrders" AS "s" ON "p3"."SalesOrderId" = "s"."Id"
      ) AS "s3" ON "s0"."Id" = "s3"."PromoCodeId"
      ORDER BY "s0"."Id", "s0"."Id0", "s1"."Id", "s1"."Id0", "s2"."Id", "s2"."Id0", "s3"."Id", "s3"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (81ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (301ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (76ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (303ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (98ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (152ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Email", "u"."FullName", NULL AS "Phone", 1 AS "IsRegistered", "u"."Id" AS "UserId", "u"."CreatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> ''
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> ''
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", (
          SELECT "s5"."CustomerAddress"
          FROM (
              SELECT "s6"."CreatedAt", "s6"."CustomerAddress", lower("s6"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s6"
              WHERE "s6"."CustomerEmail" IS NOT NULL AND "s6"."CustomerEmail" <> ''
          ) AS "s5"
          WHERE "s0"."Key" = "s5"."Key" OR ("s0"."Key" IS NULL AND "s5"."Key" IS NULL)
          ORDER BY "s5"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s0"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s0"."OrderDate") AS "FirstOrderDate", MAX("s0"."OrderDate") AS "LastOrderDate", MIN("s0"."CreatedAt") AS "CreatedAt"
      FROM (
          SELECT "s"."CreatedAt", "s"."OrderDate", "s"."TotalAmount", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> ''
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", "s"."CustomerPhone" AS "Phone", (
          SELECT "s1"."CustomerAddress"
          FROM "SalesOrders" AS "s1"
          WHERE ("s1"."CustomerEmail" IS NULL OR "s1"."CustomerEmail" = '') AND "s1"."CustomerPhone" IS NOT NULL AND "s1"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s1"."CustomerPhone"
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s"."OrderDate") AS "FirstOrderDate", MAX("s"."OrderDate") AS "LastOrderDate", MIN("s"."CreatedAt") AS "CreatedAt"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> ''
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Email", "u"."FullName", NULL AS "Phone", 1 AS "IsRegistered", "u"."Id" AS "UserId", "u"."CreatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> ''
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> ''
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", (
          SELECT "s5"."CustomerAddress"
          FROM (
              SELECT "s6"."CreatedAt", "s6"."CustomerAddress", lower("s6"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s6"
              WHERE "s6"."CustomerEmail" IS NOT NULL AND "s6"."CustomerEmail" <> ''
          ) AS "s5"
          WHERE "s0"."Key" = "s5"."Key" OR ("s0"."Key" IS NULL AND "s5"."Key" IS NULL)
          ORDER BY "s5"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s0"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s0"."OrderDate") AS "FirstOrderDate", MAX("s0"."OrderDate") AS "LastOrderDate", MIN("s0"."CreatedAt") AS "CreatedAt"
      FROM (
          SELECT "s"."CreatedAt", "s"."OrderDate", "s"."TotalAmount", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> ''
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", "s"."CustomerPhone" AS "Phone", (
          SELECT "s1"."CustomerAddress"
          FROM "SalesOrders" AS "s1"
          WHERE ("s1"."CustomerEmail" IS NULL OR "s1"."CustomerEmail" = '') AND "s1"."CustomerPhone" IS NOT NULL AND "s1"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s1"."CustomerPhone"
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s"."OrderDate") AS "FirstOrderDate", MAX("s"."OrderDate") AS "LastOrderDate", MIN("s"."CreatedAt") AS "CreatedAt"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> ''
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (302ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 28), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredEmails_0='?' (Size = 104)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> '' AND lower("s2"."CustomerEmail") NOT IN (
                  SELECT "r0"."value"
                  FROM json_each(@__registeredEmails_0) AS "r0"
              )
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> '' AND lower("s4"."CustomerEmail") NOT IN (
                  SELECT "r1"."value"
                  FROM json_each(@__registeredEmails_0) AS "r1"
              )
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s0"."OrderDate") AS "LastOrderDate"
      FROM (
          SELECT "s"."OrderDate", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> '' AND lower("s"."CustomerEmail") NOT IN (
              SELECT "r"."value"
              FROM json_each(@__registeredEmails_0) AS "r"
          )
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredPhones_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s0"."CustomerPhone" NOT IN (
              SELECT "r0"."value"
              FROM json_each(@__registeredPhones_0) AS "r0"
          ) AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", "s"."CustomerPhone" AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s"."OrderDate") AS "LastOrderDate"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> '' AND "s"."CustomerPhone" NOT IN (
          SELECT "r"."value"
          FROM json_each(@__registeredPhones_0) AS "r"
      )
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Code", "p"."CreatedAt", "p"."CreatedByUserId", "p"."Description", "p"."DiscountType", "p"."DiscountValue", "p"."EndDate", "p"."IsActive", "p"."MaximumDiscountAmount", "p"."MinimumOrderAmount", "p"."StartDate", "p"."UpdatedAt", "p"."UsageLimit", "p"."UsageLimitPerUser", "p"."UsedCount", "u"."Id", "p0"."Id", "p0"."AssignedAt", "p0"."IsNotified", "p0"."NotifiedAt", "p0"."PromoCodeId", "p0"."UserId", "p1"."Id", "p1"."CreatedAt", "p1"."ProductId", "p1"."PromoCodeId", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodes" AS "p"
      LEFT JOIN "Users" AS "u" ON "p"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "PromoCodeUsers" AS "p0" ON "p"."Id" = "p0"."PromoCodeId"
      LEFT JOIN "PromoCodeProducts" AS "p1" ON "p"."Id" = "p1"."PromoCodeId"
      ORDER BY "p"."CreatedAt" DESC, "p"."Id", "u"."Id", "p0"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (302ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (84ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 15), @p7='?' (Size = 3), @p8='?' (Size = 10)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Api.Controllers.HealthController[0]
      Health check requested
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (226ms) [Parameters=[@__categoryName_0='?' (Size = 7)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p3"."Id", "p3"."Attributes", "p3"."Color", "p3"."ColorHex", "p3"."CreatedAt", "p3"."ImageUrl", "p3"."IsActive", "p3"."MediaUrls", "p3"."PriceOverride", "p3"."ProductId", "p3"."SKU", "p3"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p1"."ProductId", "p1"."CategoryId", "c1"."Id", "c1"."CreatedAt", "c1"."Description", "c1"."IsActive", "c1"."Name", "c1"."UpdatedAt"
          FROM "ProductCategories" AS "p1"
          INNER JOIN "Categories" AS "c1" ON "p1"."CategoryId" = "c1"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p2"."Id", "p2"."CreatedAt", "p2"."MaximumStockLevel", "p2"."MinimumStockLevel", "p2"."POSQuantity", "p2"."ProductId", "p2"."Quantity", "p2"."Unit", "p2"."UpdatedAt", "p2"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p2"
          INNER JOIN "Warehouses" AS "w" ON "p2"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p3" ON "p"."Id" = "p3"."ProductId"
      WHERE "p"."IsActive" AND ("c"."Name" = @__categoryName_0 OR EXISTS (
          SELECT 1
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
          WHERE "p"."Id" = "p0"."ProductId" AND "c0"."Name" = @__categoryName_0))
      ORDER BY "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."IsActive"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 25), @__warehouse_Id_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId"
      FROM "VariantInventories" AS "v"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      ) AND "v"."WarehouseId" = @__warehouse_Id_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (82ms) [Parameters=[@__categoryName_0='?' (Size = 7)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p3"."Id", "p3"."Attributes", "p3"."Color", "p3"."ColorHex", "p3"."CreatedAt", "p3"."ImageUrl", "p3"."IsActive", "p3"."MediaUrls", "p3"."PriceOverride", "p3"."ProductId", "p3"."SKU", "p3"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p1"."ProductId", "p1"."CategoryId", "c1"."Id", "c1"."CreatedAt", "c1"."Description", "c1"."IsActive", "c1"."Name", "c1"."UpdatedAt"
          FROM "ProductCategories" AS "p1"
          INNER JOIN "Categories" AS "c1" ON "p1"."CategoryId" = "c1"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p2"."Id", "p2"."CreatedAt", "p2"."MaximumStockLevel", "p2"."MinimumStockLevel", "p2"."POSQuantity", "p2"."ProductId", "p2"."Quantity", "p2"."Unit", "p2"."UpdatedAt", "p2"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p2"
          INNER JOIN "Warehouses" AS "w" ON "p2"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p3" ON "p"."Id" = "p3"."ProductId"
      WHERE "p"."IsActive" AND ("c"."Name" = @__categoryName_0 OR EXISTS (
          SELECT 1
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
          WHERE "p"."Id" = "p0"."ProductId" AND "c0"."Name" = @__categoryName_0))
      ORDER BY "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "Warehouses" AS "w"
      WHERE "w"."IsActive"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 25), @__warehouse_Id_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId"
      FROM "VariantInventories" AS "v"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      ) AND "v"."WarehouseId" = @__warehouse_Id_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_Email_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "u1"."Id", "u1"."Address", "u1"."AssignedStoreId", "u1"."CreatedAt", "u1"."Email", "u1"."FullName", "u1"."IsActive", "u1"."PasswordHash", "u1"."Phone", "u1"."UpdatedAt", "s"."UserId", "s"."RoleId", "s"."AssignedAt", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."Name"
      FROM (
          SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE "u"."Email" = @__request_Email_0 AND "u"."IsActive"
          LIMIT 1
      ) AS "u1"
      LEFT JOIN (
          SELECT "u0"."UserId", "u0"."RoleId", "u0"."AssignedAt", "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u1"."Id" = "s"."UserId"
      ORDER BY "u1"."Id", "s"."UserId", "s"."RoleId"
info: Api.Services.JwtService[0]
      User admin@example.com logging in with roles: Customer, SuperAdmin
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u1"."Id", "u1"."FullName", "u1"."Email", "u1"."IsActive", "u1"."CreatedAt", "u1"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id"
      FROM (
          SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE "u"."Id" = @__userId_0
          LIMIT 1
      ) AS "u1"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u1"."Id" = "s"."UserId"
      ORDER BY "u1"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 35), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions called. User authenticated: True, Identity name: System Administrator
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions: User ID 1 found
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
=== GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (118ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Email", "u"."FullName", NULL AS "Phone", 1 AS "IsRegistered", "u"."Id" AS "UserId", "u"."CreatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> ''
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> ''
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", (
          SELECT "s5"."CustomerAddress"
          FROM (
              SELECT "s6"."CreatedAt", "s6"."CustomerAddress", lower("s6"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s6"
              WHERE "s6"."CustomerEmail" IS NOT NULL AND "s6"."CustomerEmail" <> ''
          ) AS "s5"
          WHERE "s0"."Key" = "s5"."Key" OR ("s0"."Key" IS NULL AND "s5"."Key" IS NULL)
          ORDER BY "s5"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s0"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s0"."OrderDate") AS "FirstOrderDate", MAX("s0"."OrderDate") AS "LastOrderDate", MIN("s0"."CreatedAt") AS "CreatedAt"
      FROM (
          SELECT "s"."CreatedAt", "s"."OrderDate", "s"."TotalAmount", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> ''
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", "s"."CustomerPhone" AS "Phone", (
          SELECT "s1"."CustomerAddress"
          FROM "SalesOrders" AS "s1"
          WHERE ("s1"."CustomerEmail" IS NULL OR "s1"."CustomerEmail" = '') AND "s1"."CustomerPhone" IS NOT NULL AND "s1"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s1"."CustomerPhone"
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s"."OrderDate") AS "FirstOrderDate", MAX("s"."OrderDate") AS "LastOrderDate", MIN("s"."CreatedAt") AS "CreatedAt"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> ''
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Email", "u"."FullName", NULL AS "Phone", 1 AS "IsRegistered", "u"."Id" AS "UserId", "u"."CreatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> ''
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> ''
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", (
          SELECT "s5"."CustomerAddress"
          FROM (
              SELECT "s6"."CreatedAt", "s6"."CustomerAddress", lower("s6"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s6"
              WHERE "s6"."CustomerEmail" IS NOT NULL AND "s6"."CustomerEmail" <> ''
          ) AS "s5"
          WHERE "s0"."Key" = "s5"."Key" OR ("s0"."Key" IS NULL AND "s5"."Key" IS NULL)
          ORDER BY "s5"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s0"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s0"."OrderDate") AS "FirstOrderDate", MAX("s0"."OrderDate") AS "LastOrderDate", MIN("s0"."CreatedAt") AS "CreatedAt"
      FROM (
          SELECT "s"."CreatedAt", "s"."OrderDate", "s"."TotalAmount", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> ''
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", "s"."CustomerPhone" AS "Phone", (
          SELECT "s1"."CustomerAddress"
          FROM "SalesOrders" AS "s1"
          WHERE ("s1"."CustomerEmail" IS NULL OR "s1"."CustomerEmail" = '') AND "s1"."CustomerPhone" IS NOT NULL AND "s1"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s1"."CustomerPhone"
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s"."OrderDate") AS "FirstOrderDate", MAX("s"."OrderDate") AS "LastOrderDate", MIN("s"."CreatedAt") AS "CreatedAt"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> ''
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 28), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredEmails_0='?' (Size = 104)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> '' AND lower("s2"."CustomerEmail") NOT IN (
                  SELECT "r0"."value"
                  FROM json_each(@__registeredEmails_0) AS "r0"
              )
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> '' AND lower("s4"."CustomerEmail") NOT IN (
                  SELECT "r1"."value"
                  FROM json_each(@__registeredEmails_0) AS "r1"
              )
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s0"."OrderDate") AS "LastOrderDate"
      FROM (
          SELECT "s"."OrderDate", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> '' AND lower("s"."CustomerEmail") NOT IN (
              SELECT "r"."value"
              FROM json_each(@__registeredEmails_0) AS "r"
          )
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredPhones_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s0"."CustomerPhone" NOT IN (
              SELECT "r0"."value"
              FROM json_each(@__registeredPhones_0) AS "r0"
          ) AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", "s"."CustomerPhone" AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s"."OrderDate") AS "LastOrderDate"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> '' AND "s"."CustomerPhone" NOT IN (
          SELECT "r"."value"
          FROM json_each(@__registeredPhones_0) AS "r"
      )
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (94ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Code", "p"."CreatedAt", "p"."CreatedByUserId", "p"."Description", "p"."DiscountType", "p"."DiscountValue", "p"."EndDate", "p"."IsActive", "p"."MaximumDiscountAmount", "p"."MinimumOrderAmount", "p"."StartDate", "p"."UpdatedAt", "p"."UsageLimit", "p"."UsageLimitPerUser", "p"."UsedCount", "u"."Id", "p0"."Id", "p0"."AssignedAt", "p0"."IsNotified", "p0"."NotifiedAt", "p0"."PromoCodeId", "p0"."UserId", "p1"."Id", "p1"."CreatedAt", "p1"."ProductId", "p1"."PromoCodeId", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodes" AS "p"
      LEFT JOIN "Users" AS "u" ON "p"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "PromoCodeUsers" AS "p0" ON "p"."Id" = "p0"."PromoCodeId"
      LEFT JOIN "PromoCodeProducts" AS "p1" ON "p"."Id" = "p1"."PromoCodeId"
      ORDER BY "p"."CreatedAt" DESC, "p"."Id", "u"."Id", "p0"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."Name", "r"."Description", "r"."CreatedAt"
      FROM "Roles" AS "r"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id", "u"."AssignedStoreId"
      FROM "Users" AS "u"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u"."Id" = "s"."UserId"
      WHERE "u"."IsActive"
      ORDER BY "u"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."Name", "r"."Description", "r"."CreatedAt"
      FROM "Roles" AS "r"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id", "u"."AssignedStoreId"
      FROM "Users" AS "u"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u"."Id" = "s"."UserId"
      WHERE "u"."IsActive"
      ORDER BY "u"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 32), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Name", "p"."Description", "p"."Resource", "p"."Action", "p"."CreatedAt"
      FROM "Permissions" AS "p"
      ORDER BY "p"."Resource", "p"."Action"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 32), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Name", "p"."Description", "p"."Resource", "p"."Action", "p"."CreatedAt"
      FROM "Permissions" AS "p"
      ORDER BY "p"."Resource", "p"."Action"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u1"."Id", "u1"."FullName", "u1"."Email", "u1"."IsActive", "u1"."CreatedAt", "u1"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id"
      FROM (
          SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE "u"."Id" = @__userId_0
          LIMIT 1
      ) AS "u1"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u1"."Id" = "s"."UserId"
      ORDER BY "u1"."Id", "s"."UserId", "s"."RoleId"
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 16), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u1"."Id", "u1"."FullName", "u1"."Email", "u1"."IsActive", "u1"."CreatedAt", "u1"."UpdatedAt", "s"."Name", "s"."UserId", "s"."RoleId", "s"."Id"
      FROM (
          SELECT "u"."Id", "u"."FullName", "u"."Email", "u"."IsActive", "u"."CreatedAt", "u"."UpdatedAt"
          FROM "Users" AS "u"
          WHERE "u"."Id" = @__userId_0
          LIMIT 1
      ) AS "u1"
      LEFT JOIN (
          SELECT "r"."Name", "u0"."UserId", "u0"."RoleId", "r"."Id"
          FROM "UserRoles" AS "u0"
          INNER JOIN "Roles" AS "r" ON "u0"."RoleId" = "r"."Id"
      ) AS "s" ON "u1"."Id" = "s"."UserId"
      ORDER BY "u1"."Id", "s"."UserId", "s"."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 35), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Program[0]
      JWT Token validated for user ID: 1
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions called. User authenticated: True, Identity name: System Administrator
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions: User ID 1 found
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (150ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 35), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions called. User authenticated: True, Identity name: System Administrator
info: Api.Controllers.PermissionsController[0]
      GetMyPermissions: User ID 1 found
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (151ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Products" AS "p"
      WHERE "p"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Warehouses" AS "w"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "Users" AS "u"
      WHERE "u"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(ef_sum("p"."Quantity"), '0.0')
      FROM "ProductInventories" AS "p"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "PurchaseOrders" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "SalesOrders" AS "s"
      WHERE "s"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductInventories" AS "p"
      WHERE ef_compare("p"."Quantity", "p"."MinimumStockLevel") <= 0
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductRequests" AS "p"
      WHERE "p"."Status" = 'Pending'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*)
      FROM "ProductAssemblies" AS "p"
      WHERE "p"."Status" = 'Completed'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 17), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 34), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
=== GetLowStockItems endpoint called - NEW CODE ===
info: Api.Controllers.DashboardController[0]
      === GetLowStockItems endpoint called - NEW CODE ===
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."CreatedAt", "p"."MaximumStockLevel", "p"."MinimumStockLevel", "p"."POSQuantity", "p"."ProductId", "p"."Quantity", "p"."Unit", "p"."UpdatedAt", "p"."WarehouseId", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "ProductInventories" AS "p"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "p"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "p"."Id", "p"."Attributes", "p"."Color", "p"."ColorHex", "p"."CreatedAt", "p"."ImageUrl", "p"."IsActive", "p"."MediaUrls", "p"."PriceOverride", "p"."ProductId", "p"."SKU", "p"."UpdatedAt", "p0"."Id", "p0"."AlwaysAvailable", "p0"."Barcode", "p0"."Brand", "p0"."CategoryId", "p0"."CompareAtPrice", "p0"."Cost", "p0"."CountryOfOrigin", "p0"."CreatedAt", "p0"."Description", "p0"."Dimensions", "p0"."ImageUrl", "p0"."InventoryTracked", "p0"."IsActive", "p0"."IsPhysicalProduct", "p0"."MediaUrls", "p0"."Name", "p0"."PackageHeight", "p0"."PackageLength", "p0"."PackageWidth", "p0"."Price", "p0"."ProductType", "p0"."PublishingChannels", "p0"."SKU", "p0"."SellWhenOutOfStock", "p0"."Status", "p0"."Tags", "p0"."Taxable", "p0"."Unit", "p0"."UpdatedAt", "p0"."VariantAttributes", "p0"."Vendor", "p0"."Weight", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "ProductVariants" AS "p" ON "v"."ProductVariantId" = "p"."Id"
      INNER JOIN "Products" AS "p0" ON "p"."ProductId" = "p0"."Id"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "p0"."IsActive"
info: Api.Controllers.DashboardController[0]
      Returning 7 low stock items
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 14), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__currentUserId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt", "u0"."Id", "u0"."Address", "u0"."AssignedStoreId", "u0"."CreatedAt", "u0"."Email", "u0"."FullName", "u0"."IsActive", "u0"."PasswordHash", "u0"."Phone", "u0"."UpdatedAt", "s1"."Id", "s1"."CreatedAt", "s1"."Notes", "s1"."ProductId", "s1"."Quantity", "s1"."SalesOrderId", "s1"."TotalPrice", "s1"."Unit", "s1"."UnitPrice", "s1"."UpdatedAt", "s1"."WarehouseId", "s1"."Id0", "s1"."AlwaysAvailable", "s1"."Barcode", "s1"."Brand", "s1"."CategoryId", "s1"."CompareAtPrice", "s1"."Cost", "s1"."CountryOfOrigin", "s1"."CreatedAt0", "s1"."Description", "s1"."Dimensions", "s1"."ImageUrl", "s1"."InventoryTracked", "s1"."IsActive", "s1"."IsPhysicalProduct", "s1"."MediaUrls", "s1"."Name", "s1"."PackageHeight", "s1"."PackageLength", "s1"."PackageWidth", "s1"."Price", "s1"."ProductType", "s1"."PublishingChannels", "s1"."SKU", "s1"."SellWhenOutOfStock", "s1"."Status", "s1"."Tags", "s1"."Taxable", "s1"."Unit0", "s1"."UpdatedAt0", "s1"."VariantAttributes", "s1"."Vendor", "s1"."Weight"
      FROM "SalesOrders" AS "s"
      INNER JOIN "Users" AS "u" ON "s"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "Users" AS "u0" ON "s"."ConfirmedByUserId" = "u0"."Id"
      LEFT JOIN (
          SELECT "s0"."Id", "s0"."CreatedAt", "s0"."Notes", "s0"."ProductId", "s0"."Quantity", "s0"."SalesOrderId", "s0"."TotalPrice", "s0"."Unit", "s0"."UnitPrice", "s0"."UpdatedAt", "s0"."WarehouseId", "p"."Id" AS "Id0", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt" AS "CreatedAt0", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit" AS "Unit0", "p"."UpdatedAt" AS "UpdatedAt0", "p"."VariantAttributes", "p"."Vendor", "p"."Weight"
          FROM "SalesItems" AS "s0"
          INNER JOIN "Products" AS "p" ON "s0"."ProductId" = "p"."Id"
      ) AS "s1" ON "s"."Id" = "s1"."SalesOrderId"
      ORDER BY "s"."CreatedAt" DESC, "s"."Id", "u"."Id", "u0"."Id", "s1"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__orderIds_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."DiscountAmount", "p"."PromoCodeId", "p"."SalesOrderId", "p"."UsedAt", "p"."UserId", "p0"."Id", "p0"."Code", "p0"."CreatedAt", "p0"."CreatedByUserId", "p0"."Description", "p0"."DiscountType", "p0"."DiscountValue", "p0"."EndDate", "p0"."IsActive", "p0"."MaximumDiscountAmount", "p0"."MinimumOrderAmount", "p0"."StartDate", "p0"."UpdatedAt", "p0"."UsageLimit", "p0"."UsageLimitPerUser", "p0"."UsedCount", "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodeUsages" AS "p"
      INNER JOIN "PromoCodes" AS "p0" ON "p"."PromoCodeId" = "p0"."Id"
      LEFT JOIN "Users" AS "u" ON "p"."UserId" = "u"."Id"
      WHERE "p"."SalesOrderId" IN (
          SELECT "o"."value"
          FROM json_each(@__orderIds_0) AS "o"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (93ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (150ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Email", "u"."FullName", NULL AS "Phone", 1 AS "IsRegistered", "u"."Id" AS "UserId", "u"."CreatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> ''
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> ''
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", (
          SELECT "s5"."CustomerAddress"
          FROM (
              SELECT "s6"."CreatedAt", "s6"."CustomerAddress", lower("s6"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s6"
              WHERE "s6"."CustomerEmail" IS NOT NULL AND "s6"."CustomerEmail" <> ''
          ) AS "s5"
          WHERE "s0"."Key" = "s5"."Key" OR ("s0"."Key" IS NULL AND "s5"."Key" IS NULL)
          ORDER BY "s5"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s0"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s0"."OrderDate") AS "FirstOrderDate", MAX("s0"."OrderDate") AS "LastOrderDate", MIN("s0"."CreatedAt") AS "CreatedAt"
      FROM (
          SELECT "s"."CreatedAt", "s"."OrderDate", "s"."TotalAmount", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> ''
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", "s"."CustomerPhone" AS "Phone", (
          SELECT "s1"."CustomerAddress"
          FROM "SalesOrders" AS "s1"
          WHERE ("s1"."CustomerEmail" IS NULL OR "s1"."CustomerEmail" = '') AND "s1"."CustomerPhone" IS NOT NULL AND "s1"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s1"."CustomerPhone"
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s"."OrderDate") AS "FirstOrderDate", MAX("s"."OrderDate") AS "LastOrderDate", MIN("s"."CreatedAt") AS "CreatedAt"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> ''
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 24), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Email", "u"."FullName", NULL AS "Phone", 1 AS "IsRegistered", "u"."Id" AS "UserId", "u"."CreatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> ''
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> ''
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", (
          SELECT "s5"."CustomerAddress"
          FROM (
              SELECT "s6"."CreatedAt", "s6"."CustomerAddress", lower("s6"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s6"
              WHERE "s6"."CustomerEmail" IS NOT NULL AND "s6"."CustomerEmail" <> ''
          ) AS "s5"
          WHERE "s0"."Key" = "s5"."Key" OR ("s0"."Key" IS NULL AND "s5"."Key" IS NULL)
          ORDER BY "s5"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s0"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s0"."OrderDate") AS "FirstOrderDate", MAX("s0"."OrderDate") AS "LastOrderDate", MIN("s0"."CreatedAt") AS "CreatedAt"
      FROM (
          SELECT "s"."CreatedAt", "s"."OrderDate", "s"."TotalAmount", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> ''
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown') AS "FullName", "s"."CustomerPhone" AS "Phone", (
          SELECT "s1"."CustomerAddress"
          FROM "SalesOrders" AS "s1"
          WHERE ("s1"."CustomerEmail" IS NULL OR "s1"."CustomerEmail" = '') AND "s1"."CustomerPhone" IS NOT NULL AND "s1"."CustomerPhone" <> '' AND "s"."CustomerPhone" = "s1"."CustomerPhone"
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1) AS "Address", COUNT(*) AS "OrderCount", COALESCE(ef_sum("s"."TotalAmount"), '0.0') AS "TotalSpent", MIN("s"."OrderDate") AS "FirstOrderDate", MAX("s"."OrderDate") AS "LastOrderDate", MIN("s"."CreatedAt") AS "CreatedAt"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> ''
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__key_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (302ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 21), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "c"."Id", "c"."Name", "c"."Description", "c"."IsActive", "c"."CreatedAt", "c"."UpdatedAt", (
          SELECT COUNT(*)
          FROM "Products" AS "p"
          WHERE "c"."Id" = "p"."CategoryId" AND "p"."IsActive") AS "ProductCount"
      FROM "Categories" AS "c"
      WHERE "c"."IsActive"
      ORDER BY "c"."Name"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 28), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Id", "r"."CreatedAt", "r"."Description", "r"."Name"
      FROM "Roles" AS "r"
      WHERE "r"."Name" = 'Customer'
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__customerRole_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "Users" AS "u"
      WHERE "u"."IsActive" AND EXISTS (
          SELECT 1
          FROM "UserRoles" AS "u0"
          WHERE "u"."Id" = "u0"."UserId" AND "u0"."RoleId" = @__customerRole_Id_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."ConfirmedByUserId", "s"."CreatedAt", "s"."CreatedByUserId", "s"."CustomerAddress", "s"."CustomerEmail", "s"."CustomerId", "s"."CustomerName", "s"."CustomerPhone", "s"."DeliveryDate", "s"."DownPayment", "s"."Notes", "s"."OrderDate", "s"."OrderNumber", "s"."PaymentStatus", "s"."Status", "s"."TotalAmount", "s"."UpdatedAt"
      FROM "SalesOrders" AS "s"
      WHERE "s"."CustomerEmail" IS NOT NULL AND lower("s"."CustomerEmail") = @__ToLower_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredEmails_0='?' (Size = 104)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", "s0"."Key" AS "Email", COALESCE((
          SELECT "s1"."CustomerName"
          FROM (
              SELECT "s2"."CreatedAt", "s2"."CustomerName", lower("s2"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s2"
              WHERE "s2"."CustomerEmail" IS NOT NULL AND "s2"."CustomerEmail" <> '' AND lower("s2"."CustomerEmail") NOT IN (
                  SELECT "r0"."value"
                  FROM json_each(@__registeredEmails_0) AS "r0"
              )
          ) AS "s1"
          WHERE "s0"."Key" = "s1"."Key" OR ("s0"."Key" IS NULL AND "s1"."Key" IS NULL)
          ORDER BY "s1"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", (
          SELECT "s3"."CustomerPhone"
          FROM (
              SELECT "s4"."CreatedAt", "s4"."CustomerPhone", lower("s4"."CustomerEmail") AS "Key"
              FROM "SalesOrders" AS "s4"
              WHERE "s4"."CustomerEmail" IS NOT NULL AND "s4"."CustomerEmail" <> '' AND lower("s4"."CustomerEmail") NOT IN (
                  SELECT "r1"."value"
                  FROM json_each(@__registeredEmails_0) AS "r1"
              )
          ) AS "s3"
          WHERE "s0"."Key" = "s3"."Key" OR ("s0"."Key" IS NULL AND "s3"."Key" IS NULL)
          ORDER BY "s3"."CreatedAt" DESC
          LIMIT 1) AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s0"."OrderDate") AS "LastOrderDate"
      FROM (
          SELECT "s"."OrderDate", lower("s"."CustomerEmail") AS "Key"
          FROM "SalesOrders" AS "s"
          WHERE "s"."CustomerEmail" IS NOT NULL AND "s"."CustomerEmail" <> '' AND lower("s"."CustomerEmail") NOT IN (
              SELECT "r"."value"
              FROM json_each(@__registeredEmails_0) AS "r"
          )
      ) AS "s0"
      GROUP BY "s0"."Key"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__registeredPhones_0='?' (Size = 70)], CommandType='Text', CommandTimeout='30']
      SELECT 0 AS "Id", NULL AS "Email", COALESCE((
          SELECT "s0"."CustomerName"
          FROM "SalesOrders" AS "s0"
          WHERE ("s0"."CustomerEmail" IS NULL OR "s0"."CustomerEmail" = '') AND "s0"."CustomerPhone" IS NOT NULL AND "s0"."CustomerPhone" <> '' AND "s0"."CustomerPhone" NOT IN (
              SELECT "r0"."value"
              FROM json_each(@__registeredPhones_0) AS "r0"
          ) AND "s"."CustomerPhone" = "s0"."CustomerPhone"
          ORDER BY "s0"."CreatedAt" DESC
          LIMIT 1), 'Unknown Customer') AS "FullName", "s"."CustomerPhone" AS "Phone", 0 AS "IsRegistered", COUNT(*) AS "OrderCount", MAX("s"."OrderDate") AS "LastOrderDate"
      FROM "SalesOrders" AS "s"
      WHERE ("s"."CustomerEmail" IS NULL OR "s"."CustomerEmail" = '') AND "s"."CustomerPhone" IS NOT NULL AND "s"."CustomerPhone" <> '' AND "s"."CustomerPhone" NOT IN (
          SELECT "r"."value"
          FROM json_each(@__registeredPhones_0) AS "r"
      )
      GROUP BY "s"."CustomerPhone"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (150ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 18), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."Code", "p"."CreatedAt", "p"."CreatedByUserId", "p"."Description", "p"."DiscountType", "p"."DiscountValue", "p"."EndDate", "p"."IsActive", "p"."MaximumDiscountAmount", "p"."MinimumOrderAmount", "p"."StartDate", "p"."UpdatedAt", "p"."UsageLimit", "p"."UsageLimitPerUser", "p"."UsedCount", "u"."Id", "p0"."Id", "p0"."AssignedAt", "p0"."IsNotified", "p0"."NotifiedAt", "p0"."PromoCodeId", "p0"."UserId", "p1"."Id", "p1"."CreatedAt", "p1"."ProductId", "p1"."PromoCodeId", "u"."Address", "u"."AssignedStoreId", "u"."CreatedAt", "u"."Email", "u"."FullName", "u"."IsActive", "u"."PasswordHash", "u"."Phone", "u"."UpdatedAt"
      FROM "PromoCodes" AS "p"
      LEFT JOIN "Users" AS "u" ON "p"."CreatedByUserId" = "u"."Id"
      LEFT JOIN "PromoCodeUsers" AS "p0" ON "p"."Id" = "p0"."PromoCodeId"
      LEFT JOIN "PromoCodeProducts" AS "p1" ON "p"."Id" = "p1"."PromoCodeId"
      ORDER BY "p"."CreatedAt" DESC, "p"."Id", "u"."Id", "p0"."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (302ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (Size = 20), @p7='?' (Size = 3), @p8='?' (Size = 117)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "ActorUserId", "After", "At", "Before", "Entity", "EntityId", "IpAddress", "UserAgent")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
      RETURNING "Id";
info: Program[0]
      JWT Token validated for user ID: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "r"."Name"
      FROM "UserRoles" AS "u"
      INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
      WHERE "u"."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (91ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "p"."Id", "p"."AlwaysAvailable", "p"."Barcode", "p"."Brand", "p"."CategoryId", "p"."CompareAtPrice", "p"."Cost", "p"."CountryOfOrigin", "p"."CreatedAt", "p"."Description", "p"."Dimensions", "p"."ImageUrl", "p"."InventoryTracked", "p"."IsActive", "p"."IsPhysicalProduct", "p"."MediaUrls", "p"."Name", "p"."PackageHeight", "p"."PackageLength", "p"."PackageWidth", "p"."Price", "p"."ProductType", "p"."PublishingChannels", "p"."SKU", "p"."SellWhenOutOfStock", "p"."Status", "p"."Tags", "p"."Taxable", "p"."Unit", "p"."UpdatedAt", "p"."VariantAttributes", "p"."Vendor", "p"."Weight", "c"."Id", "c"."CreatedAt", "c"."Description", "c"."IsActive", "c"."Name", "c"."UpdatedAt", "s"."ProductId", "s"."CategoryId", "s"."Id", "s"."CreatedAt", "s"."Description", "s"."IsActive", "s"."Name", "s"."UpdatedAt", "s0"."Id", "s0"."CreatedAt", "s0"."MaximumStockLevel", "s0"."MinimumStockLevel", "s0"."POSQuantity", "s0"."ProductId", "s0"."Quantity", "s0"."Unit", "s0"."UpdatedAt", "s0"."WarehouseId", "s0"."Id0", "s0"."Address", "s0"."City", "s0"."CreatedAt0", "s0"."IsActive", "s0"."ManagerName", "s0"."ManagerUserId", "s0"."Name", "s0"."PhoneNumber", "s0"."UpdatedAt0", "p2"."Id", "p2"."Attributes", "p2"."Color", "p2"."ColorHex", "p2"."CreatedAt", "p2"."ImageUrl", "p2"."IsActive", "p2"."MediaUrls", "p2"."PriceOverride", "p2"."ProductId", "p2"."SKU", "p2"."UpdatedAt"
      FROM "Products" AS "p"
      INNER JOIN "Categories" AS "c" ON "p"."CategoryId" = "c"."Id"
      LEFT JOIN (
          SELECT "p0"."ProductId", "p0"."CategoryId", "c0"."Id", "c0"."CreatedAt", "c0"."Description", "c0"."IsActive", "c0"."Name", "c0"."UpdatedAt"
          FROM "ProductCategories" AS "p0"
          INNER JOIN "Categories" AS "c0" ON "p0"."CategoryId" = "c0"."Id"
      ) AS "s" ON "p"."Id" = "s"."ProductId"
      LEFT JOIN (
          SELECT "p1"."Id", "p1"."CreatedAt", "p1"."MaximumStockLevel", "p1"."MinimumStockLevel", "p1"."POSQuantity", "p1"."ProductId", "p1"."Quantity", "p1"."Unit", "p1"."UpdatedAt", "p1"."WarehouseId", "w"."Id" AS "Id0", "w"."Address", "w"."City", "w"."CreatedAt" AS "CreatedAt0", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt" AS "UpdatedAt0"
          FROM "ProductInventories" AS "p1"
          INNER JOIN "Warehouses" AS "w" ON "p1"."WarehouseId" = "w"."Id"
      ) AS "s0" ON "p"."Id" = "s0"."ProductId"
      LEFT JOIN "ProductVariants" AS "p2" ON "p"."Id" = "p2"."ProductId"
      ORDER BY "p"."Name", "p"."Id", "c"."Id", "s"."ProductId", "s"."CategoryId", "s"."Id", "s0"."Id", "s0"."Id0"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__allProductVariantIds_0='?' (Size = 55)], CommandType='Text', CommandTimeout='30']
      SELECT "v"."Id", "v"."CreatedAt", "v"."MaximumStockLevel", "v"."MinimumStockLevel", "v"."POSQuantity", "v"."ProductVariantId", "v"."Quantity", "v"."Unit", "v"."UpdatedAt", "v"."WarehouseId", "w"."Id", "w"."Address", "w"."City", "w"."CreatedAt", "w"."IsActive", "w"."ManagerName", "w"."ManagerUserId", "w"."Name", "w"."PhoneNumber", "w"."UpdatedAt"
      FROM "VariantInventories" AS "v"
      INNER JOIN "Warehouses" AS "w" ON "v"."WarehouseId" = "w"."Id"
      WHERE "v"."ProductVariantId" IN (
          SELECT "a"."value"
          FROM json_each(@__allProductVariantIds_0) AS "a"
      )
